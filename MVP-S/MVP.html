<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è ‚Äî –°–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</title>

  <!-- Tailwind for quick styling -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React + ReactDOM + Babel (for demo/prototype only) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Chart.js UMD -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    .sidebar-transition { transition: width .18s ease, transform .18s ease; }
    .card-shadow { box-shadow: 0 8px 26px rgba(15,23,42,0.06); }
    .tt { position: relative }
    .tt:hover::after {
      content: attr(data-tip);
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      bottom: calc(100% + 8px);
      background: #111827;
      color: white;
      padding: 6px 8px;
      font-size: 12px;
      border-radius: 6px;
      white-space: nowrap;
      z-index: 40;
    }
    .role-selector { 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">
  <div id="root"></div>

  <script type="text/babel">
  const { useState, useEffect, useMemo, useRef } = React;
// –†–æ–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ
const ROLES = {
  STUDENT: 'student',
  UNIVERSITY_CURATOR: 'university_curator',
  COMPANY_CURATOR: 'company_curator',
  CHAIRMAN: 'chairman',
  EXPERT: 'expert',
  ADMIN: 'admin'
};

// –ü—Ä–æ—Ñ–∏–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Ä–æ–ª–∏
const ROLE_PROFILES = {
  [ROLES.STUDENT]: {
    name: '–ñ–µ–Ω—è –ë–æ—Ä–∏—Å–æ–≤',
    group: '–ë–ü-401654/452467',
    avatarBg: '#60a5fa',
    role: '–°—Ç—É–¥–µ–Ω—Ç'
  },
  [ROLES.UNIVERSITY_CURATOR]: {
    name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
    group: '–ö—É—Ä–∞—Ç–æ—Ä –°–ü–ë–ü–£',
    avatarBg: '#10b981',
    role: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞'
  },
  [ROLES.COMPANY_CURATOR]: {
    name: '–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤',
    group: '–ö—É—Ä–∞—Ç–æ—Ä –Ø–Ω–¥–µ–∫—Å',
    avatarBg: '#8b5cf6',
    role: '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏'
  },
  [ROLES.CHAIRMAN]: {
    name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
    group: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å –∫–æ–º–∏—Å—Å–∏–∏',
    avatarBg: '#f59e0b',
    role: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å'
  },
  [ROLES.EXPERT]: {
    name: '–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤',
    group: '–≠–∫—Å–ø–µ—Ä—Ç –æ—Ç—Ä–∞—Å–ª–∏',
    avatarBg: '#ef4444',
    role: '–≠–∫—Å–ø–µ—Ä—Ç'
  },
  [ROLES.ADMIN]: {
    name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –°–∏—Å—Ç–µ–º—ã',
    group: '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä',
    avatarBg: '#6b7280',
    role: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'
  }
};

// –î–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
const DEMO_DATA = {
  students: [
    { id: 1, name: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', university: '–°–ü–ë–ü–£', direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑', 
      gpa: 4.5, points: 720, level: 6, matchPercent: 89, successPercent: 82, leadership: 75, innovation: 80 },
    { id: 2, name: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', university: '–°–ü–ë–ü–£', direction: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', 
      gpa: 4.2, points: 650, level: 5, matchPercent: 76, successPercent: 70, leadership: 65, innovation: 72 },
    { id: 3, name: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', university: '–ò–¢–ú–û', direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', 
      gpa: 4.8, points: 820, level: 7, matchPercent: 92, successPercent: 88, leadership: 85, innovation: 90 },
    { id: 4, name: '–ö—É–∑–Ω–µ—Ü–æ–≤ –ö.–ö.', university: '–í–®–≠', direction: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', 
      gpa: 4.0, points: 580, level: 4, matchPercent: 68, successPercent: 65, leadership: 60, innovation: 62 },
  ],
  events: [
    { id: 1, title: '–•–∞–∫–∞—Ç–æ–Ω DataCup', type: '–•–∞–∫–∞—Ç–æ–Ω', date: '2023-12-15', status: '–ó–∞–≤–µ—Ä—à–µ–Ω–æ', participants: 42, points: 20, category: '–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' },
    { id: 2, title: '–°–µ–º–∏–Ω–∞—Ä –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ', type: '–°–µ–º–∏–Ω–∞—Ä', date: '2023-11-20', status: '–ó–∞–≤–µ—Ä—à–µ–Ω–æ', participants: 25, points: 10, category: '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' },
    { id: 3, title: '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è –ò–¢-2023', type: '–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è', date: '2024-01-20', status: '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ', participants: 0, points: 20, category: '–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' },
  ],
  applications: [
    { id: 1, student: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', type: '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç', category: '–ö—É—Ä—Å', title: 'Python Advanced', date: '2023-11-10', status: '–ù–æ–≤—ã–µ' },
    { id: 2, student: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', type: '–î–∏–ø–ª–æ–º', category: '–•–∞–∫–∞—Ç–æ–Ω', title: '–ü–æ–±–µ–¥–∞ –≤ DataCup', date: '2023-12-18', status: '–ù–æ–≤—ã–µ' },
    { id: 3, student: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', type: '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç', category: '–ö—É—Ä—Å', title: 'Machine Learning', date: '2023-10-05', status: '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ' },
  ]
};

// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞
const CRITERIA_CONFIG = [
  { key: 'gpa', title: '–£—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å', max: 150, description: '–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª (1‚Äì5) √ó 30' },
  { key: 'courses', title: '–ö—É—Ä—Å—ã', max: 200, description: '–ö–∞–∂–¥—ã–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π –∫—É—Ä—Å = 20 (–º–∞–∫—Å. 10)' },
  { key: 'events', title: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', max: 50, description: '–ö–∞–∂–¥—ã–π —Å–µ–º–∏–Ω–∞—Ä/–≤–æ—Ä–∫—à–æ–ø = 10 (–º–∞–∫—Å. 5)' },
  { key: 'projects', title: '–ü—Ä–æ–µ–∫—Ç—ã', max: 50, description: '–ö–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç = 20 (–º–∏–Ω.2)' },
  { key: 'research', title: '–ù–ò–†', max: 50, description: '–ö–∞–∂–¥–∞—è –∑–∞—â–∏—â—ë–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ = 20 (–º–∏–Ω.2)' },
  { key: 'hard', title: '–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã', max: 200, description: '–ö–∞–∂–¥—ã–π —Ç–µ—Å—Ç/–Ω–∞–≤—ã–∫ = 10 (–º–∞–∫—Å.20)' },
  { key: 'intern', title: '–ü—Ä–∞–∫—Ç–∏–∫–∞/–°—Ç–∞–∂–∏—Ä–æ–≤–∫–∏', max: 100, description: '–ú–∞–∫—Å–∏–º—É–º 25 –±–∞–ª–ª–æ–≤ –∑–∞ —Å–µ–º–µ—Å—Ç—Ä (–Ω–∞–∑–Ω–∞—á–∞–µ—Ç –∫—É—Ä–∞—Ç–æ—Ä)' },
  { key: 'recom', title: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', max: 50, description: '–ö–∞–∂–¥–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è = 25 (–º–∞–∫—Å.2)' },
];

const DEFAULT_STUDENT_STATE = {
  gpa: 4.2, courses: 3, events: 2, projects: 1, research: 0, hard: 6, intern: 25, recom: 1,
  levelThreshold: 850,
  ...ROLE_PROFILES[ROLES.STUDENT], // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  dob: '2001-01-01',
  uploaded: { resume: null, certs: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Python.pdf','SQL Workshop.pdf'] },
  activity: [
    { month: '–°–µ–Ω—Ç—è–±—Ä—å', points: 51 },
    { month: '–û–∫—Ç—è–±—Ä—å', points: 47 },
    { month: '–ù–æ—è–±—Ä—å', points: 48 }
  ],
  hardTests: [
    { id:1, title:'Python —Ç–µ—Å—Ç', type:'–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ', points:20, status:'–ü—Ä–æ–π–¥–µ–Ω', link: '/test/python' },
    { id:2, title:'SQL —Ç–µ—Å—Ç', type:'–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ', points:20, status:'–í –ø—Ä–æ—Ü–µ—Å—Å–µ', link: '/test/sql' },
    { id:3, title:'Excel –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π', type:'–†–µ–∫–æ–º–µ–Ω–¥.', points:12, status:'–ù–µ –Ω–∞—á–∞—Ç', link: '/test/excel' },
    { id:4, title:'Power BI', type:'–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π', points:5, status:'–ù–µ –Ω–∞—á–∞—Ç', link: '/test/powerbi' },
    { id:5, title:'JavaScript —Ç–µ—Å—Ç', type:'–†–µ–∫–æ–º–µ–Ω–¥.', points:12, status:'–ü—Ä–æ–π–¥–µ–Ω', link: '/test/javascript' },
    { id:6, title:'Data Science —Ç–µ—Å—Ç', type:'–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ', points:20, status:'–ü—Ä–æ–π–¥–µ–Ω', link: '/test/datascience' },
  ],
};

// –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å localStorage
function useLocalState(key, initial) {
  const [state, setState] = useState(() => {
    try {
      const raw = localStorage.getItem(key);
      return raw ? JSON.parse(raw) : initial;
    } catch { return initial; }
    });
  useEffect(() => {
    try { localStorage.setItem(key, JSON.stringify(state)); } catch {}
  }, [key, state]);
  return [state, setState];
}

// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ —Å—Ç—É–¥–µ–Ω—Ç–∞
function computePoints(values) {
  const points = {};
  points.gpa = Math.min(150, Math.round((values.gpa * 30) * 10) / 10);
  points.courses = Math.min(200, Math.round(values.courses * 20));
  points.events = Math.min(50, Math.round(values.events * 10));
  points.projects = Math.min(50, Math.round(values.projects * 20));
  points.research = Math.min(50, Math.round(values.research * 20));
  points.hard = Math.min(
    200,
    (values.hardTests || []).reduce(
      (sum, t) => sum + (t.status === '–ü—Ä–æ–π–¥–µ–Ω' ? t.points : 0),
      0
    )
   );
  points.intern = Math.min(100, Math.round(values.intern));
  points.recom = Math.min(50, Math.round(values.recom * 25));
  const total = Object.values(points).reduce((s,v)=>s+v,0);
  return { points, total: Math.round(total*10)/10 };
}

/* ------------------ –û–±—â–∏–µ UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ------------------ */

function Logo({ size = 32 }) {
return (
  <img 
    src="/logo.png" 
    alt="–õ–æ–≥–æ—Ç–∏–ø" 
    width={size} 
    height={size} 
  />
);
}

function RoleSelector({ currentRole, onRoleChange }) {
  const roles = [
    { key: ROLES.STUDENT, label: '–°—Ç—É–¥–µ–Ω—Ç', icon: 'üéì' },
    { key: ROLES.UNIVERSITY_CURATOR, label: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞', icon: 'üë®‚Äçüè´' },
    { key: ROLES.COMPANY_CURATOR, label: '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏', icon: 'üè¢' },
    { key: ROLES.CHAIRMAN, label: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å', icon: 'üë®‚Äç‚öñÔ∏è' },
    { key: ROLES.EXPERT, label: '–≠–∫—Å–ø–µ—Ä—Ç', icon: 'üîç' },
    { key: ROLES.ADMIN, label: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä', icon: '‚öôÔ∏è' },
  ];

  return (
    <div className="role-selector p-4 rounded-lg mb-6">
      <h2 className="text-white text-lg font-semibold mb-3">–í—ã–±–æ—Ä —Ä–æ–ª–∏</h2>
      <div className="grid grid-cols-2 md:grid-cols-3 gap-2">
        {roles.map(role => (
          <button
            key={role.key}
            onClick={() => onRoleChange(role.key)}
            className={`p-3 rounded flex flex-col items-center justify-center transition-all ${
              currentRole === role.key 
                ? 'bg-white text-indigo-700 shadow-lg' 
                : 'bg-indigo-800 bg-opacity-30 text-white hover:bg-opacity-50'
            }`}
          >
            <span className="text-xl mb-1">{role.icon}</span>
            <span className="text-sm font-medium">{role.label}</span>
          </button>
        ))}
      </div>
    </div>
  );
}

function Header({ onToggle, onOpenProfile, onToggleNotif, profile, currentRole }) {
  const roleLabels = {
    [ROLES.STUDENT]: '–°—Ç—É–¥–µ–Ω—Ç',
    [ROLES.UNIVERSITY_CURATOR]: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞',
    [ROLES.COMPANY_CURATOR]: '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏',
    [ROLES.CHAIRMAN]: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å',
    [ROLES.EXPERT]: '–≠–∫—Å–ø–µ—Ä—Ç',
    [ROLES.ADMIN]: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä'
  };

  return (
    <div className="flex items-center justify-between px-4 h-16 bg-white border-b sticky top-0 z-30">
      <div className="flex items-center gap-3">
        <button onClick={onToggle} className="p-2 rounded-md hover:bg-gray-100" aria-label="Toggle sidebar">
          <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <div className="flex items-center gap-3">
        <button onClick={onToggleNotif} className="p-2 rounded-md hover:bg-gray-50 tt" data-tip="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" aria-label="Notifications">
          <span className="text-2xl">üîî</span>
        </button>
        <button onClick={onOpenProfile} className="flex items-center gap-3 p-1 rounded-md hover:bg-gray-50" aria-label="Open profile">
          <div className="w-9 h-9 rounded-full flex items-center justify-center text-white font-semibold" style={{background: profile.avatarBg}}>
            {profile.name.split(' ').map(s=>s[0]).slice(0,2).join('').toUpperCase()}
          </div>
          <div className="hidden sm:flex flex-col items-start">
            <div className="text-sm font-medium leading-4">{profile.name}</div>
            <div className="text-xs text-gray-400 leading-4">{profile.group}</div>
          </div>
        </button>
      </div>
    </div>
  );
}

function Sidebar({ collapsed, active, setActive, currentRole }) {
  // –ù–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π
  const roleNavigation = {
    [ROLES.STUDENT]: [
      { key:'home', label: '–ì–ª–∞–≤–Ω–∞—è', icon: 'üè†' },
      { key:'achievements', label: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è', icon: 'üèÜ' },
      { key:'courses', label: '–ö—É—Ä—Å—ã', icon: 'üéì' },
      { key: 'hard', label: '–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã', icon: 'üß©' },
      { key:'events', label: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', icon: 'üóìÔ∏è' },
      { key:'profile', label: '–ü—Ä–æ—Ñ–∏–ª—å', icon: 'üë§' },
      { key:'contacts', label: '–ö–æ–Ω—Ç–∞–∫—Ç—ã', icon: 'üìá' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
    ],
    [ROLES.UNIVERSITY_CURATOR]: [
      { key:'home', label: '–ì–ª–∞–≤–Ω–∞—è', icon: 'üè†' },
      { key:'students', label: '–°—Ç—É–¥–µ–Ω—Ç—ã', icon: 'üë®‚Äçüéì' },
      { key:'events', label: '–°–æ–±—ã—Ç–∏—è', icon: 'üóìÔ∏è' },
      { key:'applications', label: '–ó–∞—è–≤–∫–∏', icon: 'üìÑ' },
      { key:'profile', label: '–ü—Ä–æ—Ñ–∏–ª—å', icon: 'üë§' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
    ],
    [ROLES.COMPANY_CURATOR]: [
      { key:'home', label: '–ì–ª–∞–≤–Ω–∞—è', icon: 'üè†' },
      { key:'students', label: '–°—Ç—É–¥–µ–Ω—Ç—ã', icon: 'üë®‚Äçüéì' },
      { key:'events', label: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', icon: 'üóìÔ∏è' },
      { key:'profile', label: '–ü—Ä–æ—Ñ–∏–ª—å', icon: 'üë§' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
    ],
    [ROLES.CHAIRMAN]: [
      { key:'rating', label: '–†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ & –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤', icon: 'üìä' },
      { key:'report', label: '–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è', icon: '‚úÖ' },
      { key:'courses', label: '–ö—É—Ä—Å—ã', icon: 'üìö' },
      { key:'events', label: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', icon: 'üéüÔ∏è' },
      { key:'hardskills', label: '–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã', icon: 'üß©' },
      { key:'users', label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', icon: 'üë•' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
      { key:'profile', label: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å', icon: 'üë§' },
    ],
    [ROLES.EXPERT]: [
      { key:'rating', label: '–†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ & –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤', icon: 'üìä' },
      { key:'courses', label: '–ö—É—Ä—Å—ã', icon: 'üìö' },
      { key:'events', label: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', icon: 'üéüÔ∏è' },
      { key:'hardskills', label: '–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã', icon: 'üß©' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
      { key:'profile', label: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å', icon: 'üë§' },
    ],
    [ROLES.ADMIN]: [
      { key:'home', label: '–ì–ª–∞–≤–Ω–∞—è', icon: 'üè†' },
      { key:'users', label: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏', icon: 'üë•' },
      //{ key:'documents', label: '–î–æ–∫—É–º–µ–Ω—Ç—ã', icon: 'üìã' },
      { key:'roles', label: '–†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞', icon: 'üîê' },
      { key:'support', label: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞', icon: 'üí¨' },
    ]
  };

  const items = roleNavigation[currentRole] || [];

  return (
    <aside className={`bg-white border-r sidebar-transition ${collapsed ? 'w-20' : 'w-64'} overflow-hidden flex flex-col`}>
      <div className="p-4 border-b">
        <div className="flex items-center gap-3">
          <div><Logo size={32} /></div>
          {!collapsed && <div className="flex flex-col">
            <div className="text-lg font-bold">–¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è</div>
          </div>}
        </div>
      </div>

      <nav className="p-3 flex-1">
        {items.map(it => (
          <button key={it.key} onClick={()=>setActive(it.key)} className={`w-full flex items-center gap-3 p-2 rounded-md text-left hover:bg-gray-50 ${active===it.key ? 'bg-indigo-50 text-indigo-600' : 'text-gray-700'}`}>
            <span className="w-6 text-center">{it.icon}</span>
            {!collapsed && <span className="font-medium">{it.label}</span>}
          </button>
        ))}
      </nav>

      <div className="p-3 border-t text-xs text-gray-500">–¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è v1.0</div>
    </aside>
  );
}

  /* ------------------ –°—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–æ–ª–µ–π ------------------ */

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
  function WeeklyCalendar({ events = [] }) {
    const days = ['–ü–Ω','–í—Ç','–°—Ä','–ß—Ç','–ü—Ç','–°–±','–í—Å'];
    return (
      <div>
        <h3 className="text-lg font-semibold mb-3">–ö–∞–ª–µ–Ω–¥–∞—Ä—å –±–ª–∏–∂–∞–π—à–µ–π –Ω–µ–¥–µ–ª–∏</h3>
        <div className="grid grid-cols-7 gap-2 text-sm">
          {days.map(d => (
            <div key={d} className="p-3 border rounded h-24 flex flex-col justify-between">
              <div className="font-medium">{d}</div>
              <div className="text-xs text-gray-400">‚Äî</div>
            </div>
          ))}
        </div>
        <p className="text-gray-400 text-center mt-3">–ù–æ–≤—ã—Ö –±–ª–∏–∂–∞–π—à–∏—Ö —Å–æ–±—ã—Ç–∏–π –Ω–µ—Ç</p>
      </div>
    );
  }

  function StudentHome({ totalPoints, profile, openAchievements }) {
    const LEVELS = [
      { name: '–ñ—ë–ª—Ç—ã–π —Å—Ç—É–¥–µ–Ω—Ç', min: 0, max: 99, emoji: 'üü°', tip: '–ù–∞—á–Ω–∏—Ç–µ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è.' },
      { name: '–û–∑–Ω–∞–∫–æ–º–∏–≤—à–∏–π—Å—è', min: 100, max: 199, emoji: 'üü†', tip: '–ü—Ä–æ–π–¥–∏—Ç–µ –ø–µ—Ä–≤—ã–µ –∫—É—Ä—Å—ã –∏ –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–µ–∫—Ç.' },
      { name: '–ù–æ–≤–∏—á–æ–∫', min: 200, max: 349, emoji: 'üü¢', tip: '–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –∫—É—Ä—Å, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —É—Ä–æ–≤–µ–Ω—å "–ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫".' },
      { name: '–ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫', min: 350, max: 499, emoji: 'üîµ', tip: '–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö –∏ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∞—Ö.' },
      { name: '–ü—Ä–∞–∫—Ç–∏–∫–∞–Ω—Ç', min: 500, max: 699, emoji: 'üü£', tip: '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –∏ –∫—É—Ä—Å—ã –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è.' },
      { name: '–†–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç', min: 700, max: 849, emoji: 'üî∑', tip: '–†–∞–∑–≤–∏–≤–∞–π—Ç–µ—Å—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è—Ö.' },
      { name: '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫', min: 850, max: Infinity, emoji: '‚≠ê', tip: '–í—ã –ø–æ—á—Ç–∏ –Ω–∞ –≤–µ—Ä—à–∏–Ω–µ! –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.' },
    ];

    const currentLevel = LEVELS.find(l => totalPoints >= l.min && totalPoints <= l.max);
    const percent = Math.min(100, Math.round((totalPoints / 1000) * 100));

    const [modalLevel, setModalLevel] = useState(null);
    const [showHistory, setShowHistory] = useState(false);

    const lastMonth = profile.activity && profile.activity.length > 0 ? profile.activity[profile.activity.length - 1] : { month: '–ù–æ—è–±—Ä—å', points: 0 };

    return (
      <div className="p-6 space-y-6">
        {/* –ë–ª–æ–∫ 1: –£—Ä–æ–≤–µ–Ω—å –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è */}
        <section className="bg-white card-shadow rounded-lg p-8 text-center">
          <div className="text-sm text-gray-500 mb-2">–û–±—â–∞—è —Å—É–º–º–∞ –±–∞–ª–ª–æ–≤</div>
          <div className="text-6xl font-extrabold">{totalPoints}</div>
          <div className="mt-3 text-gray-800 text-xl font-semibold">{`–¢—ã ${currentLevel.name}!`}</div>
          <div className="mt-2 text-gray-500">{`–£—á–∞—Å—Ç–≤—É–π –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö, –ø—Ä–æ—Ö–æ–¥–∏ –∫—É—Ä—Å—ã –∏ –ø—Ä–æ—è–≤–ª—è–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å ‚Äî –∫–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç —Ç–µ–±—è –∫ —Å—Ç–∞—Ç—É—Å—É –∫–æ–º–ø–µ—Ç–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞.`}</div>
        </section>

        {/* –ë–ª–æ–∫ 2: –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å —Ü–∏—Ñ—Ä–∞–º–∏ */}
        <section className="bg-white card-shadow rounded-lg p-6">
          <div className="mb-4"><strong>–®–∫–∞–ª–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞</strong></div>

          {/* –¶–∏—Ñ—Ä—ã –Ω–∞–¥ —à–∫–∞–ª–æ–π */}
          <div className="relative w-full h-4 mb-2">
            <div className="absolute top-0 left-0 w-full flex justify-between text-xs text-gray-500">
              {Array.from({length: 21}, (_, i) => i * 50).map((val) => (
                <span key={val} className="transform -translate-x-1/2">
                  {val}
                </span>
              ))}
            </div>
          </div>

          {/* –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä */}
          <div className="w-full h-3 bg-gray-200 rounded-full overflow-hidden mb-4">
            <div
              className="h-3 rounded-full"
              style={{ width: `${percent}%`, background: 'linear-gradient(90deg,#7c3aed,#06b6d4)' }}
            ></div>
          </div>

          {/* –ö—Ä—É–∂–∫–∏ —Å —É—Ä–æ–≤–Ω—è–º–∏ */}
          <div className="flex justify-between text-xs">
            {LEVELS.map((lvl, i) => {
              const isActive = totalPoints >= lvl.min;
              return (
                <div
                  key={i}
                  className="flex flex-col items-center cursor-pointer"
                  onClick={() => setModalLevel(lvl)}
                  title={`${lvl.tip} (${lvl.min}-${lvl.max} –±–∞–ª–ª–æ–≤)`}
                >
                  <div
                    className={`w-8 h-8 flex items-center justify-center rounded-full text-white font-bold ${
                      isActive ? 'bg-indigo-600' : 'bg-gray-300'
                    }`}
                  >
                    {lvl.emoji}
                  </div>
                  <div className="mt-1 text-center">{lvl.name}</div>
                </div>
              );
            })}
          </div>
        </section>

        {/* –ë–ª–æ–∫ 3: –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ –º–µ—Å—è—Ü –∏ –∏—Å—Ç–æ—Ä–∏—è */}
        <section className="bg-white card-shadow rounded-lg p-6">
          <div className="text-lg font-semibold mb-2">–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞ {lastMonth.month}:</div>
          <div className="text-gray-600 mb-1">{`+${lastMonth.points} –±–∞–ª–ª–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏`}</div>
          <div className="text-gray-600 mb-4">{`–í—Å–µ–≥–æ –Ω–∞–∫–æ–ø–ª–µ–Ω–æ: ${profile.activity ? profile.activity.reduce((s,a)=>s+a.points,0) : 0} –±–∞–ª–ª–æ–≤`}</div>
          <button onClick={() => setShowHistory(s => !s)} className="text-indigo-600 font-semibold underline mb-2">
            {showHistory ? '–°–∫—Ä—ã—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏' : '–ü–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏'}
          </button>

          {showHistory && profile.activity && (
            <div className="mt-3 p-3 bg-gray-50 rounded space-y-1 text-sm text-gray-700">
              <div className="font-medium">–ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ –º–µ—Å—è—Ü–∞–º:</div>
              {profile.activity.map(a => (
                <div key={a.month}>üóìÔ∏è {a.month}: {a.points} {a.month === lastMonth.month ? '(–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)' : '–±–∞–ª–ª–æ–≤'}</div>
              ))}
            </div>
          )}
        </section>

        {/* –ë–ª–æ–∫ 4: –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è/–∫–∞–ª–µ–Ω–¥–∞—Ä—å */}
        <section className="bg-white card-shadow rounded-lg p-6">
          <div className="text-lg font-semibold mb-3">–ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</div>
          <WeeklyCalendar events={[]} />
        </section>

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —É—Ä–æ–≤–Ω–µ–π */}
        {modalLevel && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 max-w-md w-full text-center">
              <div className="text-lg font-semibold mb-2">{modalLevel.name}</div>
              <div className="text-gray-600 mb-4">{modalLevel.tip}</div>
              <div className="flex justify-center gap-4">
                <button onClick={() => { openAchievements(); setModalLevel(null); }} className="px-4 py-2 bg-indigo-600 text-white rounded">–ü–µ—Ä–µ–π—Ç–∏ –≤ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</button>
                <button onClick={() => setModalLevel(null)} className="px-4 py-2 border rounded">–ó–∞–∫—Ä—ã—Ç—å</button>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }
   function StudentHardSkillsPage() {
  const hardSkills = DEFAULT_STUDENT_STATE.hardTests || [];

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ —Ç–µ—Å—Ç—É
  const handleGoToTest = (skillId, skillTitle, link) => {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ—Å—Ç–∞
    alert(`–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ç–µ—Å—Ç—É: ${skillTitle}\n–°—Å—ã–ª–∫–∞: ${link}`);
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <h2 className="text-xl font-bold mb-4">–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã</h2>
        
        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–¢–µ—Å—Ç/–ù–∞–≤—ã–∫</th>
                <th className="px-4 py-3">–¢–∏–ø</th>
                <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                <th className="px-4 py-3">–¢–µ—Å—Ç</th>
              </tr>
            </thead>
            <tbody>
              {hardSkills.map(skill => (
                <tr key={skill.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3 font-medium">{skill.title}</td>
                  <td className="px-4 py-3">
                    <span className={`px-2 py-1 rounded text-xs ${
                      skill.type === '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' ? 'bg-red-100 text-red-800' :
                      skill.type === '–†–µ–∫–æ–º–µ–Ω–¥.' ? 'bg-blue-100 text-blue-800' :
                      'bg-gray-100 text-gray-800'
                    }`}>
                      {skill.type}
                    </span>
                  </td>
                  <td className="px-4 py-3 font-semibold">{skill.points}</td>
                  <td className="px-4 py-3">
                    <span className={`px-2 py-1 rounded text-xs ${
                      skill.status === '–ü—Ä–æ–π–¥–µ–Ω' ? 'bg-green-100 text-green-800' :
                      skill.status === '–í –ø—Ä–æ—Ü–µ—Å—Å–µ' ? 'bg-yellow-100 text-yellow-800' :
                      'bg-gray-100 text-gray-800'
                    }`}>
                      {skill.status}
                    </span>
                  </td>
                  <td className="px-4 py-3">
                    {skill.status === '–ü—Ä–æ–π–¥–µ–Ω' ? (
                      <button 
                        className="px-3 py-1 bg-gray-300 text-gray-500 rounded text-sm cursor-not-allowed"
                        disabled
                      >
                        –ü—Ä–æ–π–¥–µ–Ω
                      </button>
                    ) : (
                      <button 
                        onClick={() => handleGoToTest(skill.id, skill.title, skill.link)}
                        className="px-3 py-1 bg-indigo-600 text-white rounded text-sm hover:bg-indigo-700 transition-colors"
                      >
                        –ü–µ—Ä–µ–π—Ç–∏
                      </button>
                    )}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <div className="mt-6 p-4 bg-blue-50 rounded-lg">
          <h3 className="font-semibold mb-2">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞—Ö</h3>
          <p className="text-sm text-gray-600 mb-3">
            –•–∞—Ä–¥ —Å–∫–∏–ª–ª—ã - —ç—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –∏ –∑–Ω–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã. 
            –ö–∞–∂–¥—ã–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –ø—Ä–∏–Ω–æ—Å–∏—Ç –±–∞–ª–ª—ã –≤ –≤–∞—à –æ–±—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥.
          </p>
          <div className="text-xs text-gray-500">
            <p>‚Ä¢ <strong>–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</strong> —Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ–π–¥–µ–Ω—ã –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã</p>
            <p>‚Ä¢ <strong>–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ</strong> —Ç–µ—Å—Ç—ã –ø–æ–≤—ã—à–∞—é—Ç –≤–∞—à —Ä–µ–π—Ç–∏–Ω–≥ –∏ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏</p>
            <p>‚Ä¢ <strong>–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</strong> —Ç–µ—Å—Ç—ã –¥–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–ª–ª—ã</p>
            <p>‚Ä¢ <strong>–ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ</strong> —Ç–µ—Å—Ç—ã –Ω–µ–ª—å–∑—è –ø—Ä–æ–π—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ</p>
          </div>
        </div>

        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞–º */}
        <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-4">
          <div className="bg-green-50 p-4 rounded-lg">
            <div className="text-2xl font-bold text-green-700">
              {hardSkills.filter(skill => skill.status === '–ü—Ä–æ–π–¥–µ–Ω').length}
            </div>
            <div className="text-sm text-green-600">–ü—Ä–æ–π–¥–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤</div>
          </div>
          <div className="bg-yellow-50 p-4 rounded-lg">
            <div className="text-2xl font-bold text-yellow-700">
              {hardSkills.filter(skill => skill.status === '–í –ø—Ä–æ—Ü–µ—Å—Å–µ').length}
            </div>
            <div className="text-sm text-yellow-600">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
          </div>
          <div className="bg-blue-50 p-4 rounded-lg">
            <div className="text-2xl font-bold text-blue-700">
              {hardSkills.reduce((sum, skill) => sum + (skill.status === '–ü—Ä–æ–π–¥–µ–Ω' ? skill.points : 0), 0)}
            </div>
            <div className="text-sm text-blue-600">–í—Å–µ–≥–æ –±–∞–ª–ª–æ–≤</div>
          </div>
        </div>
      </div>
    </div>
  );
}


  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä–∞—Ç–æ—Ä–∞ –í–£–ó–∞
  function UniversityCuratorHome({ onNavigateToStudents, onCreateEvent, onCreateReview }) {
    const [eventModalOpen, setEventModalOpen] = useState(false);
    const [reviewModalOpen, setReviewModalOpen] = useState(false);
    const [eventForm, setEventForm] = useState({ title: '', description: '', date: '', time: '' });
    const [reviewForm, setReviewForm] = useState({ studentId: '', text: '' });

    const handleCreateEvent = () => {
      if (onCreateEvent) {
        onCreateEvent();
      } else {
        setEventModalOpen(true);
      }
    };

    const handleSubmitEvent = () => {
      if (eventForm.title && eventForm.date && eventForm.time) {
        alert(`–°–æ–±—ã—Ç–∏–µ "${eventForm.title}" —Å–æ–∑–¥–∞–Ω–æ (—ç–º—É–ª—è—Ü–∏—è)`);
        setEventForm({ title: '', description: '', date: '', time: '' });
        setEventModalOpen(false);
      } else {
        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è');
      }
    };

    const handleCreateReview = () => {
      setReviewModalOpen(true);
    };

    const handleSubmitReview = () => {
      if (reviewForm.studentId && reviewForm.text) {
        const student = DEMO_DATA.students.find(s => s.id.toString() === reviewForm.studentId);
        alert(`–û—Ç–∑—ã–≤ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ "${student ? student.name : ''}" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω (—ç–º—É–ª—è—Ü–∏—è)`);
        setReviewForm({ studentId: '', text: '' });
        setReviewModalOpen(false);
      } else {
        alert('–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –Ω–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞');
      }
    };

    return (
      <div className="p-6 space-y-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä–∞—Ç–æ—Ä–∞ –í–£–ó–∞</h2>
          
          {/* –ë–ª–æ–∫ KPI */}
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div className="bg-blue-50 p-4 rounded-lg">
              <div className="text-2xl font-bold text-blue-700">112</div>
              <div className="text-sm text-blue-600">–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</div>
            </div>
            <div className="bg-green-50 p-4 rounded-lg">
              <div className="text-2xl font-bold text-green-700">86</div>
              <div className="text-sm text-green-600">–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</div>
            </div>
            <div className="bg-purple-50 p-4 rounded-lg">
              <div className="text-2xl font-bold text-purple-700">24</div>
              <div className="text-sm text-purple-600">–ù–æ–≤—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</div>
            </div>
            <div className="bg-yellow-50 p-4 rounded-lg">
              <div className="text-2xl font-bold text-yellow-700">6</div>
              <div className="text-sm text-yellow-600">–ù–æ–≤—ã—Ö –æ—Ç–∑—ã–≤–æ–≤</div>
            </div>
          </div>

          {/* –ë–ª–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π */}
          <div className="mb-6">
            <h3 className="text-lg font-semibold mb-3">–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è</h3>
            <div className="space-y-2">
              {DEMO_DATA.events.map(event => (
                <div key={event.id} className="flex justify-between items-center p-3 border rounded">
                  <div>
                    <div className="font-medium">{event.title}</div>
                    <div className="text-sm text-gray-500">{event.date} ‚Ä¢ {event.type}</div>
                  </div>
                  <span className={`px-2 py-1 rounded text-xs ${
                    event.status === '–ó–∞–≤–µ—Ä—à–µ–Ω–æ' ? 'bg-green-100 text-green-800' : 
                    event.status === '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ' ? 'bg-blue-100 text-blue-800' : 'bg-gray-100'
                  }`}>
                    {event.status}
                  </span>
                </div>
              ))}
            </div>
          </div>

          {/* –ë–ª–æ–∫ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π */}
          <div>
            <h3 className="text-lg font-semibold mb-3">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div className="flex flex-wrap gap-2">
              <button onClick={handleCreateEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
              </button>
              <button onClick={onNavigateToStudents} className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
                –ü–µ—Ä–µ–π—Ç–∏ –∫ —Å—Ç—É–¥–µ–Ω—Ç–∞–º
              </button>
              <button onClick={handleCreateReview} className="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">
                –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
              </button>
            </div>
          </div>
        </div>

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è */}
        {eventModalOpen && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h3>
                <button onClick={() => setEventModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                  <input
                    type="text"
                    value={eventForm.title}
                    onChange={(e) => setEventForm({...eventForm, title: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                  <textarea
                    value={eventForm.description}
                    onChange={(e) => setEventForm({...eventForm, description: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    rows="4"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
                  />
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium mb-1">–î–∞—Ç–∞ *</label>
                    <input
                      type="date"
                      value={eventForm.date}
                      onChange={(e) => setEventForm({...eventForm, date: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">–í—Ä–µ–º—è *</label>
                    <input
                      type="time"
                      value={eventForm.time}
                      onChange={(e) => setEventForm({...eventForm, time: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setEventModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞ */}
        {reviewModalOpen && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤</h3>
                <button onClick={() => setReviewModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ *</label>
                  <select
                    value={reviewForm.studentId}
                    onChange={(e) => setReviewForm({...reviewForm, studentId: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ --</option>
                    {DEMO_DATA.students.map(student => (
                      <option key={student.id} value={student.id}>{student.name}</option>
                    ))}
                  </select>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞ *</label>
                  <textarea
                    value={reviewForm.text}
                    onChange={(e) => setReviewForm({...reviewForm, text: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    rows="6"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞"
                  />
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setReviewModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitReview} className="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏
  function CompanyCuratorHome({ onViewStudentAchievements, onViewStudentProfile }) {
  const [infoModalOpen, setInfoModalOpen] = useState(false);
  const [studentProfileModalOpen, setStudentProfileModalOpen] = useState(false);
  const [selectedStudent, setSelectedStudent] = useState(null);
  const [activeDashboard, setActiveDashboard] = useState('activities');
  const [dashboardTooltip, setDashboardTooltip] = useState(false);

  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
  const activitiesData = [
    { name: '–ö—É—Ä—Å—ã', current: 8, max: 10, min: 2, description: '–ö–∞–∂–¥—ã–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π –∫—É—Ä—Å = 20 –±–∞–ª–ª–æ–≤ (–º–∏–Ω. 2 –∫—É—Ä—Å–∞, –º–∞–∫—Å. 10 –∫—É—Ä—Å–æ–≤)' },
    { name: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', current: 25, max: 30, min: 5, description: '–ö–∞–∂–¥—ã–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π —Å–µ–º–∏–Ω–∞—Ä/–≤–æ—Ä–∫—à–æ–ø = 10 –±–∞–ª–ª–æ–≤ (–º–∏–Ω. 5, –º–∞–∫—Å. 30 –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π)' },
    { name: '–ü—Ä–æ–µ–∫—Ç—ã', current: 1, max: 10, min: 2, description: '–ö–∞–∂–¥—ã–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç = 20 –±–∞–ª–ª–æ–≤ (–º–∏–Ω. 2 –ø—Ä–æ–µ–∫—Ç–∞, –º–∞–∫—Å. 10)' },
    { name: '–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã', current: 12, max: 20, min: 5, description: '–ë–∞–ª–ª—ã –∑–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–π —Ç–µ—Å—Ç –∏–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–π –Ω–∞–≤—ã–∫ (–º–∏–Ω. 5, –º–∞–∫—Å. 20 —Ç–µ—Å—Ç–æ–≤)' }
  ];

  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º —Å –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
  const studentsLevelData = [
    { level: '–ñ—ë–ª—Ç—ã–π —Å—Ç—É–¥–µ–Ω—Ç (0-99)', students: 5, color: '#FFD700' },
    { level: '–û–∑–Ω–∞–∫–æ–º–∏–≤—à–∏–π—Å—è (100-199)', students: 8, color: '#FFA500' },
    { level: '–ù–æ–≤–∏—á–æ–∫ (200-349)', students: 15, color: '#32CD32' },
    { level: '–ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ (350-499)', students: 22, color: '#1E90FF' },
    { level: '–ü—Ä–∞–∫—Ç–∏–∫–∞–Ω—Ç (500-699)', students: 18, color: '#9370DB' },
    { level: '–†–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç (700-849)', students: 12, color: '#4169E1' },
    { level: '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ (850+)', students: 6, color: '#FF69B4' }
  ];

  // –î–æ–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  const studentsWithContacts = [
    { 
      id: 1, 
      name: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', 
      university: '–°–ü–ë–ü–£', 
      direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑', 
      gpa: 4.5, 
      points: 720, 
      level: 6, 
      matchPercent: 89, 
      successPercent: 82, 
      leadership: 75, 
      innovation: 80,
      phone: '+7 (912) 345-67-89',
      email: 'i.ivanov@edu.spbpu.ru',
      resume: '–†–µ–∑—é–º–µ_–ò–≤–∞–Ω–æ–≤_–ò–ò.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Python_Advanced.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_SQL_Expert.pdf', '–î–∏–ø–ª–æ–º_–•–∞–∫–∞—Ç–æ–Ω_2023.pdf']
    },
    { 
      id: 2, 
      name: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', 
      university: '–°–ü–ë–ü–£', 
      direction: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', 
      gpa: 4.2, 
      points: 650, 
      level: 5, 
      matchPercent: 76, 
      successPercent: 70, 
      leadership: 65, 
      innovation: 72,
      phone: '+7 (923) 456-78-90',
      email: 'p.petrov@edu.spbpu.ru',
      resume: '–†–µ–∑—é–º–µ_–ü–µ—Ç—Ä–æ–≤_–ü–ü.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Java_Base.pdf']
    },
    { 
      id: 3, 
      name: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', 
      university: '–ò–¢–ú–û', 
      direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', 
      gpa: 4.8, 
      points: 820, 
      level: 7, 
      matchPercent: 92, 
      successPercent: 88, 
      leadership: 85, 
      innovation: 90,
      phone: '+7 (934) 567-89-01',
      email: 's.sidorova@edu.itmo.ru',
      resume: '–†–µ–∑—é–º–µ_–°–∏–¥–æ—Ä–æ–≤–∞_–°–°.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Machine_Learning.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Data_Science.pdf', '–î–∏–ø–ª–æ–º_–û–ª–∏–º–ø–∏–∞–¥–∞_2023.pdf']
    },
    { 
      id: 4, 
      name: '–ö—É–∑–Ω–µ—Ü–æ–≤ –ö.–ö.', 
      university: '–í–®–≠', 
      direction: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', 
      gpa: 4.0, 
      points: 580, 
      level: 4, 
      matchPercent: 68, 
      successPercent: 65, 
      leadership: 60, 
      innovation: 62,
      phone: '+7 (945) 678-90-12',
      email: 'k.kuznetsov@edu.hse.ru',
      resume: '–†–µ–∑—é–º–µ_–ö—É–∑–Ω–µ—Ü–æ–≤_–ö–ö.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Business_Analytics.pdf']
    },
  ];

  const handleOpenProfile = (student) => {
    setSelectedStudent(student);
    setStudentProfileModalOpen(true);
  };

  const handleCloseProfile = () => {
    setStudentProfileModalOpen(false);
    setSelectedStudent(null);
  };

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—ä–µ–º–Ω–æ–π –ª–∏–Ω–µ–π—á–∞—Ç–æ–π –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
  const ActivityBarChart = () => {
    const canvasRef = useRef(null);
    const chartRef = useRef(null);

    useEffect(() => {
      if (chartRef.current) {
        chartRef.current.destroy();
      }

      const ctx = canvasRef.current.getContext('2d');
      
      // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è –æ–±—ä–µ–º–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
      const createGradient = (color) => {
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, color);
        gradient.addColorStop(0.7, color);
        gradient.addColorStop(1, '#2D3748');
        return gradient;
      };

      chartRef.current = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: activitiesData.map(a => a.name),
          datasets: [
            {
              label: '–ú–∞–∫—Å–∏–º—É–º',
              data: activitiesData.map(a => a.max),
              backgroundColor: activitiesData.map(() => 'rgba(239, 68, 68, 0.3)'),
              borderColor: activitiesData.map(() => '#DC2626'),
              borderWidth: 2,
              borderRadius: 8,
              borderSkipped: false,
            },
            {
              label: '–¢–µ–∫—É—â–µ–µ',
              data: activitiesData.map(a => a.current),
              backgroundColor: activitiesData.map(() => createGradient('#3B82F6')),
              borderColor: activitiesData.map(() => '#1D4ED8'),
              borderWidth: 2,
              borderRadius: 6,
              borderSkipped: false,
            },
            {
              label: '–ú–∏–Ω–∏–º—É–º',
              data: activitiesData.map(a => a.min),
              backgroundColor: activitiesData.map(() => 'rgba(250, 204, 21, 0.8)'),
              borderColor: activitiesData.map(() => '#EAB308'),
              borderWidth: 2,
              borderRadius: 4,
              borderSkipped: false,
              //categoryPercentage: 0.3,
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                usePointStyle: true,
                padding: 20
              }
            },
            tooltip: {
              callbacks: {
                afterLabel: function(context) {
                  const index = context.dataIndex;
                  return activitiesData[index].description;
                }
              }
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              },
              ticks: {
                font: {
                  size: 12,
                  weight: 'bold'
                }
              }
            },
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(0, 0, 0, 0.1)'
              },
              title: {
                display: true,
                text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ',
                font: {
                  size: 14,
                  weight: 'bold'
                }
              }
            }
          },
          animation: {
            duration: 1000,
            easing: 'easeOutQuart'
          }
        }
      });

      return () => {
        if (chartRef.current) {
          chartRef.current.destroy();
        }
      };
    }, []);

    return (
      <div className="bg-white p-6 rounded-lg card-shadow">
        <div className="h-96">
          <canvas ref={canvasRef} />
        </div>
        <div className="mt-4 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
          {activitiesData.map((activity, index) => (
            <div key={index} className="p-3 bg-gray-50 rounded-lg">
              <div className="text-lg font-bold text-blue-600">{activity.current}</div>
              <div className="text-sm text-gray-600">{activity.name}</div>
              <div className="text-xs text-gray-500">
                –∏–∑ {activity.max} {activity.min > 0 && `‚Ä¢ –º–∏–Ω: ${activity.min}`}
              </div>
            </div>
          ))}
        </div>
      </div>
    );
  };

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—ä–µ–º–Ω–æ–π –ª–∏–Ω–µ–π—á–∞—Ç–æ–π –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º
  const StudentsLevelChart = () => {
    const canvasRef = useRef(null);
    const chartRef = useRef(null);

    useEffect(() => {
      if (chartRef.current) {
        chartRef.current.destroy();
      }

      const ctx = canvasRef.current.getContext('2d');
      
      // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –¥–ª—è –æ–±—ä–µ–º–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞
      const createGradient = (color) => {
        const gradient = ctx.createLinearGradient(0, 0, 0, 400);
        gradient.addColorStop(0, color);
        gradient.addColorStop(0.7, color);
        gradient.addColorStop(1, '#2D3748');
        return gradient;
      };

      chartRef.current = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: studentsLevelData.map(s => s.level),
          datasets: [
            {
              label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤',
              data: studentsLevelData.map(s => s.students),
              backgroundColor: studentsLevelData.map(s => createGradient(s.color)),
              borderColor: studentsLevelData.map(s => s.color),
              borderWidth: 2,
              borderRadius: 8,
              borderSkipped: false,
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return `–°—Ç—É–¥–µ–Ω—Ç–æ–≤: ${context.parsed.y}`;
                }
              }
            }
          },
          scales: {
            x: {
              grid: {
                display: false
              },
              ticks: {
                font: {
                  size: 11
                },
                maxRotation: 45
              }
            },
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(0, 0, 0, 0.1)'
              },
              title: {
                display: true,
                text: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤',
                font: {
                  size: 14,
                  weight: 'bold'
                }
              },
              ticks: {
                stepSize: 5
              }
            }
          },
          animation: {
            duration: 1000,
            easing: 'easeOutQuart'
          }
        }
      });

      return () => {
        if (chartRef.current) {
          chartRef.current.destroy();
        }
      };
    }, []);

    const totalStudents = studentsLevelData.reduce((sum, level) => sum + level.students, 0);

    return (
      <div className="bg-white p-6 rounded-lg card-shadow">
        <div className="h-96">
          <canvas ref={canvasRef} />
        </div>
        <div className="mt-4 p-4 bg-blue-50 rounded-lg">
          <div className="flex justify-between items-center">
            <div>
              <div className="text-lg font-bold text-blue-800">–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤: {totalStudents}</div>
              <div className="text-sm text-blue-600">
                –ù–∞–∏–≤—ã—Å—à–∏–π —É—Ä–æ–≤–µ–Ω—å: {studentsLevelData[6].students} —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ ({Math.round((studentsLevelData[6].students / totalStudents) * 100)}%)
              </div>
            </div>
            <div className="text-right">
              <div className="text-sm font-semibold text-gray-700">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —É—Ä–æ–≤–Ω—è–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞</div>
              <div className="text-xs text-gray-600">–Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤</div>
            </div>
          </div>
        </div>
      </div>
    );
  };

  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤ –¥–ª—è —Ç—É–ª—Ç–∏–ø–æ–≤
  const dashboardDescriptions = {
    activities: "–≠—Ç–æ—Ç –¥–∞—à–±–æ—Ä–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–¥–æ–±–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∑–∞ —Ç–µ–∫—É—â–∏–π –ø–µ—Ä–∏–æ–¥. –ö—Ä–∞—Å–Ω—ã–µ —Å—Ç–æ–ª–±—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–∏–Ω–∏–µ - —Ç–µ–∫—É—â–∏–µ, –∂–µ–ª—Ç—ã–µ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π.",
    students: "–û–±—ä–µ–º–Ω–∞—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–±—Ä–∞–Ω–Ω—ã—Ö –±–∞–ª–ª–æ–≤. –ö–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É —ç—Ç–∞–ø—É —Ä–∞–∑–≤–∏—Ç–∏—è –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–π."
  };

  return (
    <div className="p-6 space-y-6">
      {/* –î–∞—à–±–æ—Ä–¥ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º */}
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex items-center justify-between mb-4">
          <div className="flex items-center gap-3">
            <h2 className="text-xl font-bold">
              {activeDashboard === 'activities' ? '–î–∞—à–±–æ—Ä–¥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π' : '–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º'}
            </h2>
            <div 
              className="relative"
              onMouseEnter={() => setDashboardTooltip(true)}
              onMouseLeave={() => setDashboardTooltip(false)}
            >
              <button className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 hover:bg-gray-300">
                ?
              </button>
              
              {dashboardTooltip && (
                <div className="absolute left-0 top-8 w-80 bg-gray-900 text-white text-sm p-3 rounded-lg z-10 shadow-lg">
                  {dashboardDescriptions[activeDashboard]}
                </div>
              )}
            </div>
          </div>
          
          <div className="relative">
            <select 
              value={activeDashboard}
              onChange={(e) => setActiveDashboard(e.target.value)}
              className="appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-8 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"
            >
              <option value="activities">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</option>
              <option value="students">–°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ —É—Ä–æ–≤–Ω—è–º</option>
            </select>
            <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M19 9l-7 7-7-7" />
              </svg>
            </div>
          </div>
        </div>

        {activeDashboard === 'activities' ? <ActivityBarChart /> : <StudentsLevelChart />}
      </div>

      {/* –¢–∞–±–ª–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ */}
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex items-center gap-2 mb-3">
          <h3 className="text-lg font-semibold">–°—Ç—É–¥–µ–Ω—Ç—ã —Å –≤—ã—Å–æ–∫–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º</h3>
          <div className="relative group">
            <button className="w-5 h-5 rounded-full bg-gray-200 flex items-center justify-center text-xs text-gray-600 hover:bg-gray-300">
              i
            </button>
            <div className="absolute left-0 top-8 w-96 bg-gray-900 text-white text-sm p-3 rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10 shadow-lg">
              <p className="mb-2">–ù–∞ –¥–∞–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ –±—ã–ª –ø—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –ø–æ–º–æ—â–∏ ML.</p>
              <table className="w-full text-left">
                <thead>
                  <tr>
                    <th className="py-1 font-semibold">–ü–∞—Ä–∞–º–µ—Ç—Ä</th>
                    <th className="py-1 font-semibold">–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td className="py-1">Match % (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ—Ñ–∏–ª—é)</td>
                    <td className="py-1">–ù–∞—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–µ—Ç–µ–Ω—Ü–∏–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –º–æ–¥–µ–ª—å—é —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</td>
                  </tr>
                  <tr>
                    <td className="py-1">Success probability</td>
                    <td className="py-1">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã</td>
                  </tr>
                  <tr>
                    <td className="py-1">Leadership score</td>
                    <td className="py-1">–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –∫ —É–ø—Ä–∞–≤–ª–µ–Ω—á–µ—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</td>
                  </tr>
                  <tr>
                    <td className="py-1">Innovation score</td>
                    <td className="py-1">–£—Ä–æ–≤–µ–Ω—å –∏–Ω–∏—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏</td>
                  </tr>
                  <tr>
                    <td className="py-1">Team compatibility</td>
                    <td className="py-1">–ù–∞—Å–∫–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ–º–∞–Ω–¥–∞–º —Å –ø–æ—Ö–æ–∂–∏–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–§–ò–û</th>
                <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                <th className="px-4 py-3">Match %</th>
                <th className="px-4 py-3">Success %</th>
                <th className="px-4 py-3">Leadership</th>
                <th className="px-4 py-3">Innovation</th>
                <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              {studentsWithContacts.map(student => (
                <tr key={student.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3 font-medium">{student.name}</td>
                  <td className="px-4 py-3">{student.direction}</td>
                  <td className="px-4 py-3">{student.matchPercent}%</td>
                  <td className="px-4 py-3">{student.successPercent}%</td>
                  <td className="px-4 py-3">{student.leadership}%</td>
                  <td className="px-4 py-3">{student.innovation}%</td>
                  <td className="px-4 py-3">
                    <button 
                      onClick={() => onViewStudentAchievements && onViewStudentAchievements(student)}
                      className="text-indigo-600 hover:text-indigo-900 font-medium mr-2"
                    >
                      –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </button>
                    <button 
                      onClick={() => handleOpenProfile(student)}
                      className="text-green-600 hover:text-green-900 font-medium"
                    >
                      –ü—Ä–æ—Ñ–∏–ª—å
                    </button>
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ */}
      {studentProfileModalOpen && selectedStudent && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-2xl">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞</h3>
              <button onClick={handleCloseProfile} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700">–§–ò–û</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.name}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.phone}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Email</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.email}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.direction}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–†–µ–∑—é–º–µ</label>
                <div className="mt-1">
                  <a href={`/documents/${selectedStudent.resume}`} download className="text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1">
                    <span>üìé</span> {selectedStudent.resume}
                  </a>
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</label>
                <ul className="mt-1 space-y-1">
                  {selectedStudent.certificates.map((cert, index) => (
                    <li key={index}>
                      <a href={`/documents/${cert}`} download className="text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1">
                        <span>üìé</span> {cert}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
            <div className="flex justify-end mt-6">
              <button onClick={handleCloseProfile} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –ó–∞–∫—Ä—ã—Ç—å
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è
  function ChairmanHome({ onNavigateToReports, onNavigateToUsers }) {
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="bg-white border rounded-lg p-4">
              <h3 className="text-lg font-semibold mb-3">–°—Ç—É–¥–µ–Ω—Ç—ã</h3>
              <p className="text-gray-600 mb-4">–û–±–∑–æ—Ä –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤</p>
              <button onClick={onNavigateToReports} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
              </button>
            </div>
            
            <div className="bg-white border rounded-lg p-4">
              <h3 className="text-lg font-semibold mb-3">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
              <p className="text-gray-600 mb-4">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–∏—Å—Ç–µ–º—ã</p>
              <button onClick={onNavigateToUsers} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ (—Ç–∞–∫–æ–π –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∫–∞–∫ —É –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è)
  function ExpertHome({ currentRole }) {
  const isChairman = currentRole === ROLES.CHAIRMAN;
  
  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <h2 className="text-xl font-bold mb-4">
          –ü–∞–Ω–µ–ª—å {isChairman ? '–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è (–≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä—Ç–∞)' : '—ç–∫—Å–ø–µ—Ä—Ç–∞'}
        </h2>
        
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
          <div className="bg-blue-50 p-4 rounded-lg">
            <h3 className="font-semibold text-blue-700 mb-2">–†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ & –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤</h3>
            <p className="text-sm text-blue-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–æ–º, ML-–∞–Ω–∞–ª–∏–∑ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤</p>
          </div>
          <div className="bg-green-50 p-4 rounded-lg">
            <h3 className="font-semibold text-green-700 mb-2">–ö—É—Ä—Å—ã –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
            <p className="text-sm text-green-600">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π</p>
          </div>
          <div className="bg-purple-50 p-4 rounded-lg">
            <h3 className="font-semibold text-purple-700 mb-2">–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã</h3>
            <p className="text-sm text-purple-600">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–∞–º–∏ –∏ —Ç–µ—Å—Ç–∞–º–∏</p>
          </div>
        </div>

        {isChairman && (
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div className="bg-yellow-50 p-4 rounded-lg">
              <h3 className="font-semibold text-yellow-700 mb-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
              <p className="text-sm text-yellow-600">–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–∏—Å—Ç–µ–º—ã</p>
            </div>
            <div className="bg-red-50 p-4 rounded-lg">
              <h3 className="font-semibold text-red-700 mb-2">–°–∏—Å—Ç–µ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã</h3>
              <p className="text-sm text-red-600">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ—Ç—á–µ—Ç—ã –ø–æ –≤—Å–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º</p>
            </div>
          </div>
        )}

        {/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
        <div className="mt-6 pt-6 border-t">
          <h3 className="font-semibold mb-3">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
          <div className="flex flex-wrap gap-2">
            <button className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
              –ü–µ—Ä–µ–π—Ç–∏ –∫ —Ä–µ–π—Ç–∏–Ω–≥—É
            </button>
            <button className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700">
              –°–æ–∑–¥–∞—Ç—å –æ—Ç—á–µ—Ç
            </button>
            {isChairman && (
              <button className="px-4 py-2 bg-yellow-600 text-white rounded hover:bg-yellow-700">
                –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
              </button>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}


  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
  function AdminHome({ onNavigateToUsers }) {
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
          
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <div className="bg-blue-50 p-4 rounded-lg border">
              <h3 className="font-semibold text-blue-700 mb-2">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
              <p className="text-sm text-blue-600 mb-3">–°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
              <button onClick={onNavigateToUsers} className="px-3 py-1 bg-blue-600 text-white rounded text-sm">
                –ü–µ—Ä–µ–π—Ç–∏
              </button>
            </div>
          </div>
          
          <div className="bg-white border rounded-lg p-4">
            <h3 className="text-lg font-semibold mb-3">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
            <div className="space-y-2">
              <div className="flex justify-between items-center p-2 border-b">
                <div>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "–ò–≤–∞–Ω–æ–≤ –ò.–ò." —Å–æ–∑–¥–∞–Ω</div>
                <div className="text-sm text-gray-500">12.11.2023 14:30</div>
              </div>
              <div className="flex justify-between items-center p-2 border-b">
                <div>–†–æ–ª—å "–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞" –æ–±–Ω–æ–≤–ª–µ–Ω–∞</div>
                <div className="text-sm text-gray-500">11.11.2023 10:15</div>
              </div>
              <div className="flex justify-between items-center p-2">
                <div>–®–∞–±–ª–æ–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω</div>
                <div className="text-sm text-gray-500">10.11.2023 16:45</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
  function HomePage({ currentRole, totalPoints, profile, openAchievements, onNavigateToStudents, onNavigateToReports, onNavigateToUsers, onViewStudentAchievements, onViewStudentProfile }) {
    switch(currentRole) {
      case ROLES.STUDENT:
        return <StudentHome totalPoints={totalPoints} profile={profile} openAchievements={openAchievements} />;
      case ROLES.UNIVERSITY_CURATOR:
        return <UniversityCuratorHome onNavigateToStudents={onNavigateToStudents} />;
      case ROLES.COMPANY_CURATOR:
        return <CompanyCuratorHome onViewStudentAchievements={onViewStudentAchievements} onViewStudentProfile={onViewStudentProfile} />;
      case ROLES.CHAIRMAN:
        return <ChairmanHome onNavigateToReports={onNavigateToReports} onNavigateToUsers={onNavigateToUsers} />;
      case ROLES.EXPERT:
        return <ExpertHome onNavigateToReports={onNavigateToReports} onNavigateToUsers={onNavigateToUsers} />;
      case ROLES.ADMIN:
        return <AdminHome onNavigateToUsers={onNavigateToUsers} />;
      default:
        return <StudentHome totalPoints={totalPoints} profile={profile} openAchievements={openAchievements} />;
    }
  }
  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫—É—Ä—Å–æ–≤ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
  function ExpertCoursesPage({ currentRole }) {
  const [courses, setCourses] = useState([
    { id: 1, title: '–û—Å–Ω–æ–≤—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏', category: '–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π', points: 20, direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢' },
    { id: 2, title: 'Python –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π', category: '–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π', points: 20, direction: '–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è' },
    { id: 3, title: '–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ', category: '–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π', points: 20, direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è' },
  ]);
  const [addModalOpen, setAddModalOpen] = useState(false);
  const [editMode, setEditMode] = useState(false);
  const [courseForm, setCourseForm] = useState({ title: '', category: '', points: '', direction: '' });

  const handleAddCourse = () => {
    if (courseForm.title && courseForm.category && courseForm.points) {
      const newCourse = {
        id: courses.length + 1,
        ...courseForm,
        points: parseInt(courseForm.points)
      };
      setCourses([...courses, newCourse]);
      setCourseForm({ title: '', category: '', points: '', direction: '' });
      setAddModalOpen(false);
      alert(`–ö—É—Ä—Å "${courseForm.title}" –¥–æ–±–∞–≤–ª–µ–Ω`);
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
    }
  };

  const handleDeleteCourse = (courseId) => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å?')) {
      setCourses(courses.filter(course => course.id !== courseId));
      alert('–ö—É—Ä—Å —É–¥–∞–ª–µ–Ω');
    }
  };

  const handleFieldEdit = (courseId, field, value) => {
    if (editMode) {
      setCourses(courses.map(course => 
        course.id === courseId ? { ...course, [field]: value } : course
      ));
    }
  };

  const handleExportExcel = () => {
    alert('–î–∞–Ω–Ω—ã–µ –∫—É—Ä—Å–æ–≤ –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ Excel (—ç–º—É–ª—è—Ü–∏—è)');
  };

  const handleImportExcel = () => {
    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –∫—É—Ä—Å–æ–≤ (—ç–º—É–ª—è—Ü–∏—è)');
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-bold">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞–º–∏</h2>
          <div className="flex gap-2">
            {/* –ö–Ω–æ–ø–∫–∏ Excel */}
            <button 
              onClick={handleExportExcel} 
              className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2 tt"
              data-tip="–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ Excel"
            >
              <span>‚¨ÜÔ∏è</span> Excel
            </button>
            <button 
              onClick={handleImportExcel} 
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 tt"
              data-tip="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Excel"
            >
              <span>‚¨áÔ∏è</span> Excel
            </button>
            
            {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}
            <button 
              onClick={() => setEditMode(!editMode)}
              className={`px-4 py-2 rounded flex items-center gap-2 ${
                editMode ? 'bg-red-600 text-white' : 'bg-gray-600 text-white'
              }`}
            >
              <span>{editMode ? '‚úÖ' : '‚úèÔ∏è'}</span>
              {editMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' : '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'}
            </button>

            <button 
              onClick={() => setAddModalOpen(true)}
              className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2"
            >
              <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å
            </button>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞</th>
                <th className="px-4 py-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                {editMode && <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>}
              </tr>
            </thead>
            <tbody>
              {courses.map(course => (
                <tr key={course.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={course.title}
                        onChange={(e) => handleFieldEdit(course.id, 'title', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className="font-medium">{course.title}</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={course.category}
                        onChange={(e) => handleFieldEdit(course.id, 'category', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</option>
                        <option value="–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π</option>
                        <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</option>
                      </select>
                    ) : (
                      <span className={`px-2 py-1 rounded text-xs ${
                        course.category === '–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π' ? 'bg-red-100 text-red-800' :
                        course.category === '–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π' ? 'bg-blue-100 text-blue-800' :
                        'bg-gray-100 text-gray-800'
                      }`}>
                        {course.category}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={course.points}
                        onChange={(e) => handleFieldEdit(course.id, 'points', parseInt(e.target.value))}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="10">10</option>
                        <option value="20">20</option>
                      </select>
                    ) : (
                      <span className="font-semibold">{course.points}</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={course.direction}
                        onChange={(e) => handleFieldEdit(course.id, 'direction', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      course.direction
                    )}
                  </td>
                  {editMode && (
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => handleDeleteCourse(course.id)}
                        className="text-red-600 hover:text-red-900 font-medium text-lg"
                        title="–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å"
                      >
                        ‚ùå
                      </button>
                    </td>
                  )}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞ */}
      {addModalOpen && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-md">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å</h3>
              <button onClick={() => setAddModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞ *</label>
                <input
                  type="text"
                  value={courseForm.title}
                  onChange={(e) => setCourseForm({...courseForm, title: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                <select
                  value={courseForm.category}
                  onChange={(e) => setCourseForm({...courseForm, category: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                  <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</option>
                  <option value="–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π</option>
                  <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ë–∞–ª–ª—ã *</label>
                <select
                  value={courseForm.points}
                  onChange={(e) => setCourseForm({...courseForm, points: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–ª–ª—ã --</option>
                  <option value="10">10</option>
                  <option value="20">20</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                <input
                  type="text"
                  value={courseForm.direction}
                  onChange={(e) => setCourseForm({...courseForm, direction: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"
                />
              </div>
              <div className="flex justify-end gap-2">
                <button onClick={() => setAddModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button onClick={handleAddCourse} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                  –î–æ–±–∞–≤–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

//–°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
function ExpertEventsPage({ currentRole }) {
  const [events, setEvents] = useState([
    { id: 1, title: '–°–µ–º–∏–Ω–∞—Ä –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ', category: '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ', points: 10, type: '–°–µ–º–∏–Ω–∞—Ä' },
    { id: 2, title: '–•–∞–∫–∞—Ç–æ–Ω Data', category: '–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ', points: 20, type: '–•–∞–∫–∞—Ç–æ–Ω' },
    { id: 3, title: '–í–æ—Ä–∫—à–æ–ø –ø–æ SQL', category: '–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ', points: 10, type: '–í–æ—Ä–∫—à–æ–ø' },
  ]);
  const [addModalOpen, setAddModalOpen] = useState(false);
  const [editMode, setEditMode] = useState(false);
  const [eventForm, setEventForm] = useState({ title: '', category: '', points: '', type: '' });

  const handleAddEvent = () => {
    if (eventForm.title && eventForm.category && eventForm.points && eventForm.type) {
      const newEvent = {
        id: events.length + 1,
        ...eventForm,
        points: parseInt(eventForm.points)
      };
      setEvents([...events, newEvent]);
      setEventForm({ title: '', category: '', points: '', type: '' });
      setAddModalOpen(false);
      alert(`–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ "${eventForm.title}" –¥–æ–±–∞–≤–ª–µ–Ω–æ`);
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
    }
  };

  const handleDeleteEvent = (eventId) => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ?')) {
      setEvents(events.filter(event => event.id !== eventId));
      alert('–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ —É–¥–∞–ª–µ–Ω–æ');
    }
  };

  const handleFieldEdit = (eventId, field, value) => {
    if (editMode) {
      setEvents(events.map(event => 
        event.id === eventId ? { ...event, [field]: value } : event
      ));
    }
  };

  const handleExportExcel = () => {
    alert('–î–∞–Ω–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ Excel (—ç–º—É–ª—è—Ü–∏—è)');
  };

  const handleImportExcel = () => {
    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π (—ç–º—É–ª—è—Ü–∏—è)');
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-bold">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏</h2>
          <div className="flex gap-2">
            {/* –ö–Ω–æ–ø–∫–∏ Excel */}
            <button 
              onClick={handleExportExcel} 
              className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2 tt"
              data-tip="–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ Excel"
            >
              <span>‚¨ÜÔ∏è</span> Excel
            </button>
            <button 
              onClick={handleImportExcel} 
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 tt"
              data-tip="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Excel"
            >
              <span>‚¨áÔ∏è</span> Excel
            </button>
            
            {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}
            <button 
              onClick={() => setEditMode(!editMode)}
              className={`px-4 py-2 rounded flex items-center gap-2 ${
                editMode ? 'bg-red-600 text-white' : 'bg-gray-600 text-white'
              }`}
            >
              <span>{editMode ? '‚úÖ' : '‚úèÔ∏è'}</span>
              {editMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' : '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'}
            </button>

            <button 
              onClick={() => setAddModalOpen(true)}
              className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2"
            >
              <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
            </button>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</th>
                <th className="px-4 py-3">–¢–∏–ø</th>
                <th className="px-4 py-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                {editMode && <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>}
              </tr>
            </thead>
            <tbody>
              {events.map(event => (
                <tr key={event.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={event.title}
                        onChange={(e) => handleFieldEdit(event.id, 'title', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className="font-medium">{event.title}</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={event.type}
                        onChange={(e) => handleFieldEdit(event.id, 'type', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä</option>
                        <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø</option>
                        <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω</option>
                        <option value="–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                      </select>
                    ) : (
                      event.type
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={event.category}
                        onChange={(e) => handleFieldEdit(event.id, 'category', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                        <option value="–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ</option>
                        <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                      </select>
                    ) : (
                      <span className={`px-2 py-1 rounded text-xs ${
                        event.category === '–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' ? 'bg-red-100 text-red-800' :
                        event.category === '–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ' ? 'bg-blue-100 text-blue-800' :
                        'bg-gray-100 text-gray-800'
                      }`}>
                        {event.category}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={event.points}
                        onChange={(e) => handleFieldEdit(event.id, 'points', parseInt(e.target.value))}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="10">10</option>
                        <option value="20">20</option>
                      </select>
                    ) : (
                      <span className="font-semibold">{event.points}</span>
                    )}
                  </td>
                  {editMode && (
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => handleDeleteEvent(event.id)}
                        className="text-red-600 hover:text-red-900 font-medium text-lg"
                        title="–£–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ"
                      >
                        ‚ùå
                      </button>
                    </td>
                  )}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è */}
      {addModalOpen && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-md">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h3>
              <button onClick={() => setAddModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                <input
                  type="text"
                  value={eventForm.title}
                  onChange={(e) => setEventForm({...eventForm, title: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è *</label>
                <select
                  value={eventForm.type}
                  onChange={(e) => setEventForm({...eventForm, type: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø --</option>
                  <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä</option>
                  <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø</option>
                  <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω</option>
                  <option value="–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è *</label>
                <select
                  value={eventForm.category}
                  onChange={(e) => setEventForm({...eventForm, category: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                  <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                  <option value="–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ</option>
                  <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ë–∞–ª–ª—ã *</label>
                <select
                  value={eventForm.points}
                  onChange={(e) => setEventForm({...eventForm, points: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–ª–ª—ã --</option>
                  <option value="10">10</option>
                  <option value="20">20</option>
                </select>
              </div>
              <div className="flex justify-end gap-2">
                <button onClick={() => setAddModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button onClick={handleAddEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                  –î–æ–±–∞–≤–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–æ–±—â–∏–π –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–æ–ª–µ–π)
  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ (–∫—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏)
function StudentsPage({ currentRole, onViewStudentProfile, onViewStudentAchievements, onEvaluateStudent, onEvaluatePractice }) {
  const [searchQuery, setSearchQuery] = useState('');
  const [filterDirection, setFilterDirection] = useState('all');
  const [filterLevel, setFilterLevel] = useState('all');
  const [studentProfileModalOpen, setStudentProfileModalOpen] = useState(false);
  const [selectedStudent, setSelectedStudent] = useState(null);
  const [practiceModalOpen, setPracticeModalOpen] = useState(false);
  const [evaluatingStudent, setEvaluatingStudent] = useState(null);
  const [practiceForm, setPracticeForm] = useState({ score: '', review: '', recommendationFile: null });

  const directions = [
    '–ò–¢-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è',
    '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑',
    '–¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–π –æ—Ç—Ä–∞—Å–ª–∏',
    '–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–π –æ—Ç—Ä–∞—Å–ª–∏',
    '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å—é –ò–¢-—Å–µ—Ä–≤–∏—Å–æ–≤'
  ];

  const levels = [
    { id: 1, name: '–ñ–µ–ª—Ç—ã–π —Å—Ç—É–¥–µ–Ω—Ç', range: '0-99' },
    { id: 2, name: '–û–∑–Ω–∞–∫–æ–º–∏–≤—à–∏–π—Å—è —Å—Ç—É–¥–µ–Ω—Ç', range: '100-199' },
    { id: 3, name: '–ù–æ–≤–∏—á–æ–∫', range: '200-349' },
    { id: 4, name: '–ê–∫—Ç–∏–≤–Ω—ã–π —É—á–∞—Å—Ç–Ω–∏–∫', range: '350-499' },
    { id: 5, name: '–ü—Ä–∞–∫—Ç–∏–∫–∞–Ω—Ç', range: '500-699' },
    { id: 6, name: '–†–∞–∑–≤–∏–≤–∞—é—â–∏–π—Å—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç', range: '700-849' },
    { id: 7, name: '–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫', range: '850+' }
  ];

  const studentsWithContacts = [
    { 
      id: 1, 
      name: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', 
      university: '–°–ü–ë–ü–£', 
      direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑', 
      gpa: 4.5, 
      points: 720, 
      level: 6, 
      matchPercent: 89, 
      successPercent: 82, 
      leadership: 75, 
      innovation: 80,
      practiceScore: 21,
      phone: '+7 (912) 345-67-89',
      email: 'i.ivanov@edu.spbpu.ru',
      resume: '–†–µ–∑—é–º–µ_–ò–≤–∞–Ω–æ–≤_–ò–ò.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Python_Advanced.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_SQL_Expert.pdf', '–î–∏–ø–ª–æ–º_–•–∞–∫–∞—Ç–æ–Ω_2023.pdf']
    },
    { 
      id: 2, 
      name: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', 
      university: '–°–ü–ë–ü–£', 
      direction: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', 
      gpa: 4.2, 
      points: 650, 
      level: 5, 
      matchPercent: 76, 
      successPercent: 70, 
      leadership: 65, 
      innovation: 72,
      practiceScore: 18,
      phone: '+7 (923) 456-78-90',
      email: 'p.petrov@edu.spbpu.ru',
      resume: '–†–µ–∑—é–º–µ_–ü–µ—Ç—Ä–æ–≤_–ü–ü.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Java_Base.pdf']
    },
    { 
      id: 3, 
      name: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', 
      university: '–ò–¢–ú–û', 
      direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', 
      gpa: 4.8, 
      points: 820, 
      level: 7, 
      matchPercent: 92, 
      successPercent: 88, 
      leadership: 85, 
      innovation: 90,
      practiceScore: 23,
      phone: '+7 (934) 567-89-01',
      email: 's.sidorova@edu.itmo.ru',
      resume: '–†–µ–∑—é–º–µ_–°–∏–¥–æ—Ä–æ–≤–∞_–°–°.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Machine_Learning.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Data_Science.pdf', '–î–∏–ø–ª–æ–º_–û–ª–∏–º–ø–∏–∞–¥–∞_2023.pdf']
    },
    { 
      id: 4, 
      name: '–ö—É–∑–Ω–µ—Ü–æ–≤ –ö.–ö.', 
      university: '–í–®–≠', 
      direction: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞', 
      gpa: 4.0, 
      points: 580, 
      level: 4, 
      matchPercent: 68, 
      successPercent: 65, 
      leadership: 60, 
      innovation: 62,
      practiceScore: 16,
      phone: '+7 (945) 678-90-12',
      email: 'k.kuznetsov@edu.hse.ru',
      resume: '–†–µ–∑—é–º–µ_–ö—É–∑–Ω–µ—Ü–æ–≤_–ö–ö.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Business_Analytics.pdf']
    },
    { 
      id: 5, 
      name: '–ù–∏–∫–æ–ª–∞–µ–≤ –ù.–ù.', 
      university: '–ú–ì–£', 
      direction: '–ò–¢-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏—è', 
      gpa: 4.3, 
      points: 420, 
      level: 4, 
      matchPercent: 72, 
      successPercent: 68, 
      leadership: 70, 
      innovation: 65,
      practiceScore: null,
      phone: '+7 (956) 789-01-23',
      email: 'n.nikolaev@edu.msu.ru',
      resume: '–†–µ–∑—é–º–µ_–ù–∏–∫–æ–ª–∞–µ–≤_–ù–ù.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Network_Security.pdf']
    },
    { 
      id: 6, 
      name: '–û—Ä–ª–æ–≤–∞ –û.–û.', 
      university: '–ú–ò–§–ò', 
      direction: '–ö–∏–±–µ—Ä–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–π –æ—Ç—Ä–∞—Å–ª–∏', 
      gpa: 4.7, 
      points: 780, 
      level: 6, 
      matchPercent: 85, 
      successPercent: 80, 
      leadership: 75, 
      innovation: 82,
      practiceScore: 22,
      phone: '+7 (967) 890-12-34',
      email: 'o.orlova@edu.mifi.ru',
      resume: '–†–µ–∑—é–º–µ_–û—Ä–ª–æ–≤–∞_–û–û.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Cyber_Security.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Penetration_Testing.pdf']
    },
    { 
      id: 7, 
      name: '–†–æ–º–∞–Ω–æ–≤ –†.–†.', 
      university: '–ú–§–¢–ò', 
      direction: '–¢–µ–ª–µ–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –≤ –Ω–µ—Ñ—Ç–µ–≥–∞–∑–æ–≤–æ–π –æ—Ç—Ä–∞—Å–ª–∏', 
      gpa: 4.1, 
      points: 320, 
      level: 3, 
      matchPercent: 65, 
      successPercent: 62, 
      leadership: 58, 
      innovation: 60,
      practiceScore: 19,
      phone: '+7 (978) 901-23-45',
      email: 'r.romanov@edu.mipt.ru',
      resume: '–†–µ–∑—é–º–µ_–†–æ–º–∞–Ω–æ–≤_–†–†.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Telecom_Basics.pdf']
    },
    { 
      id: 8, 
      name: '–°–µ–º–µ–Ω–æ–≤ –°.–°.', 
      university: '–°–ü–ë–ì–£', 
      direction: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º, –∫–∞—á–µ—Å—Ç–≤–æ–º –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç—å—é –ò–¢-—Å–µ—Ä–≤–∏—Å–æ–≤', 
      gpa: 4.6, 
      points: 680, 
      level: 5, 
      matchPercent: 78, 
      successPercent: 75, 
      leadership: 80, 
      innovation: 72,
      practiceScore: 20,
      phone: '+7 (989) 012-34-56',
      email: 's.semenov@edu.spbu.ru',
      resume: '–†–µ–∑—é–º–µ_–°–µ–º–µ–Ω–æ–≤_–°–°.pdf',
      certificates: ['–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_ITIL_Foundation.pdf', '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Service_Management.pdf']
    }
  ];

  const handleOpenProfile = (student) => {
    setSelectedStudent(student);
    setStudentProfileModalOpen(true);
  };

  const handleCloseProfile = () => {
    setStudentProfileModalOpen(false);
    setSelectedStudent(null);
  };

  const handleEvaluatePractice = (student) => {
    setEvaluatingStudent(student);
    setPracticeForm({ score: '', review: '', recommendationFile: null });
    setPracticeModalOpen(true);
  };

  const handleSubmitPractice = () => {
    if (evaluatingStudent && practiceForm.score && practiceForm.review) {
      const fileName = practiceForm.recommendationFile ? practiceForm.recommendationFile.name : '–Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
      alert(`–û—Ü–µ–Ω–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ "${evaluatingStudent.name}" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –ë–∞–ª–ª—ã: ${practiceForm.score}/25. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: ${fileName} (—ç–º—É–ª—è—Ü–∏—è)`);
      setPracticeModalOpen(false);
      setEvaluatingStudent(null);
      setPracticeForm({ score: '', review: '', recommendationFile: null });
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –±–∞–ª–ª—ã –∏ –æ—Ç–∑—ã–≤');
    }
  };

  const handleFileUpload = (e) => {
    const file = e.target.files[0];
    if (file) {
      setPracticeForm({...practiceForm, recommendationFile: file});
    }
  };

  const filteredStudents = studentsWithContacts.filter(student => {
    const matchesSearch = student.name.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesDirection = filterDirection === 'all' || student.direction === filterDirection;
    
    let matchesLevel = true;
    if (filterLevel !== 'all') {
      const level = levels.find(l => l.id.toString() === filterLevel);
      if (level) {
        if (level.id === 1) matchesLevel = student.points >= 0 && student.points <= 99;
        else if (level.id === 2) matchesLevel = student.points >= 100 && student.points <= 199;
        else if (level.id === 3) matchesLevel = student.points >= 200 && student.points <= 349;
        else if (level.id === 4) matchesLevel = student.points >= 350 && student.points <= 499;
        else if (level.id === 5) matchesLevel = student.points >= 500 && student.points <= 699;
        else if (level.id === 6) matchesLevel = student.points >= 700 && student.points <= 849;
        else if (level.id === 7) matchesLevel = student.points >= 850;
      }
    }
    
    return matchesSearch && matchesDirection && matchesLevel;
  });

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <h2 className="text-xl font-bold mb-4">–°—Ç—É–¥–µ–Ω—Ç—ã –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ</h2>
        
        <div className="mb-4 flex flex-wrap gap-2">
          <input 
            type="text" 
            placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û..." 
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          />
          <select 
            value={filterDirection}
            onChange={(e) => setFilterDirection(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
            {directions.map((direction, index) => (
              <option key={index} value={direction}>{direction}</option>
            ))}
          </select>
          <select 
            value={filterLevel}
            onChange={(e) => setFilterLevel(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ —É—Ä–æ–≤–Ω–∏</option>
            {levels.map(level => (
              <option key={level.id} value={level.id}>
                {level.name} ({level.range})
              </option>
            ))}
          </select>
        </div>
        
        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–§–ò–û</th>
                <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                <th className="px-4 py-3">–£—Ä–æ–≤–µ–Ω—å</th>
                <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                <th className="px-4 py-3">ML-–ø—Ä–æ–≥–Ω–æ–∑</th>
                <th className="px-4 py-3">–û—Ü–µ–Ω–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ (–≤ –±–∞–ª–ª–∞—Ö)</th>
                <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              {filteredStudents.map(student => (
                <tr key={student.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3 font-medium">{student.name}</td>
                  <td className="px-4 py-3">{student.direction}</td>
                  <td className="px-4 py-3">
                    <span className={`px-2 py-1 rounded text-xs ${
                      student.level >= 6 ? 'bg-green-100 text-green-800' :
                      student.level >= 4 ? 'bg-blue-100 text-blue-800' :
                      student.level >= 3 ? 'bg-yellow-100 text-yellow-800' :
                      'bg-gray-100 text-gray-800'
                    }`}>
                      {student.level}
                    </span>
                  </td>
                  <td className="px-4 py-3">{student.points}</td>
                  <td className="px-4 py-3">{student.successPercent}%</td>
                  <td className="px-4 py-3">
                    {student.practiceScore ? (
                      <span className="font-semibold">{student.practiceScore}/25</span>
                    ) : (
                      <span className="text-gray-400">‚Äî</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    <div className="flex flex-col gap-1">
                      <button 
                        onClick={() => onViewStudentAchievements && onViewStudentAchievements(student)}
                        className="text-indigo-600 hover:text-indigo-900 font-medium text-left text-sm"
                      >
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                      </button>
                      <button 
                        onClick={() => handleOpenProfile(student)}
                        className="text-green-600 hover:text-green-900 font-medium text-left text-sm"
                      >
                        –ü—Ä–æ—Ñ–∏–ª—å
                      </button>
                      <button 
                        onClick={() => handleEvaluatePractice(student)}
                        className="text-orange-600 hover:text-orange-900 font-medium text-left text-sm"
                      >
                        –û—Ü–µ–Ω–∏—Ç—å
                      </button>
                    </div>
                  </td>
                </tr>
              ))}
              {filteredStudents.length === 0 && (
                <tr>
                  <td colSpan="7" className="px-4 py-3 text-center text-gray-500">
                    –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ */}
      {studentProfileModalOpen && selectedStudent && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-2xl">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–ü—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞</h3>
              <button onClick={handleCloseProfile} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700">–§–ò–û</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.name}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.phone}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">Email</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.email}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
                <div className="mt-1 text-sm text-gray-900">{selectedStudent.direction}</div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–†–µ–∑—é–º–µ</label>
                <div className="mt-1">
                  <a href={`/documents/${selectedStudent.resume}`} download className="text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1">
                    <span>üìé</span> {selectedStudent.resume}
                  </a>
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</label>
                <ul className="mt-1 space-y-1">
                  {selectedStudent.certificates.map((cert, index) => (
                    <li key={index}>
                      <a href={`/documents/${cert}`} download className="text-sm text-indigo-600 hover:text-indigo-900 flex items-center gap-1">
                        <span>üìé</span> {cert}
                      </a>
                    </li>
                  ))}
                </ul>
              </div>
            </div>
            <div className="flex justify-end mt-6">
              <button onClick={handleCloseProfile} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –ó–∞–∫—Ä—ã—Ç—å
              </button>
            </div>
          </div>
        </div>
      )}

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ */}
      {practiceModalOpen && evaluatingStudent && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–û—Ü–µ–Ω–∫–∞ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏: {evaluatingStudent.name}</h3>
              <button onClick={() => setPracticeModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">–ë–∞–ª–ª—ã * (0-25)</label>
                <input
                  type="number"
                  min="0"
                  max="25"
                  step="1"
                  value={practiceForm.score}
                  onChange={(e) => setPracticeForm({...practiceForm, score: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 0 –¥–æ 25"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–û—Ç–∑—ã–≤ *</label>
                <textarea
                  value={practiceForm.review}
                  onChange={(e) => setPracticeForm({...practiceForm, review: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  rows="6"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–∑—ã–≤ –æ –ø—Ä–∞–∫—Ç–∏–∫–µ —Å—Ç—É–¥–µ–Ω—Ç–∞"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é (PDF, DOC, DOCX)</label>
                <input
                  type="file"
                  accept=".pdf,.doc,.docx"
                  onChange={handleFileUpload}
                  className="w-full px-3 py-2 border rounded"
                />
                {practiceForm.recommendationFile && (
                  <div className="mt-2 text-sm text-green-600">
                    –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω: {practiceForm.recommendationFile.name}
                  </div>
                )}
              </div>
              <div className="flex justify-end gap-2">
                <button onClick={() => setPracticeModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button onClick={handleSubmitPractice} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                  –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}


  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞—è–≤–æ–∫ (–∫—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞)
  function ApplicationsPage() {
    const [filterStatus, setFilterStatus] = useState('all');
    const [checkModalOpen, setCheckModalOpen] = useState(false);
    const [selectedApplication, setSelectedApplication] = useState(null);
    const [checkStatus, setCheckStatus] = useState('–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ');
    
    const filteredApplications = filterStatus === 'all' 
      ? DEMO_DATA.applications 
      : DEMO_DATA.applications.filter(app => app.status === filterStatus);

    const handleCheck = (app) => {
      setSelectedApplication(app);
      setCheckStatus(app.status === '–ù–æ–≤—ã–µ' ? '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ' : app.status);
      setCheckModalOpen(true);
    };

    const handleUpdateStatus = () => {
      if (selectedApplication) {
        alert(`–°—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ "${selectedApplication.title}" –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ "${checkStatus}" (—ç–º—É–ª—è—Ü–∏—è)`);
        setCheckModalOpen(false);
        setSelectedApplication(null);
      }
    };
    
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–ó–∞—è–≤–∫–∏ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π</h2>
          
          <div className="mb-4 flex border-b">
            <button 
              onClick={() => setFilterStatus('all')}
              className={`px-4 py-2 font-medium ${filterStatus === 'all' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
            >
              –í—Å–µ
            </button>
            <button 
              onClick={() => setFilterStatus('–ù–æ–≤—ã–µ')}
              className={`px-4 py-2 font-medium ${filterStatus === '–ù–æ–≤—ã–µ' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
            >
              –ù–æ–≤—ã–µ
            </button>
            <button 
              onClick={() => setFilterStatus('–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É')}
              className={`px-4 py-2 font-medium ${filterStatus === '–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
            >
              –ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
            </button>
            <button 
              onClick={() => setFilterStatus('–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ')}
              className={`px-4 py-2 font-medium ${filterStatus === '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
            >
              –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ
            </button>
            <button 
              onClick={() => setFilterStatus('–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ')}
              className={`px-4 py-2 font-medium ${filterStatus === '–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
            >
              –û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ
            </button>
          </div>
          
          <div className="overflow-x-auto">
            <table className="w-full text-sm text-left">
              <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th className="px-4 py-3">–°—Ç—É–¥–µ–Ω—Ç</th>
                  <th className="px-4 py-3">–¢–∏–ø</th>
                  <th className="px-4 py-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                  <th className="px-4 py-3">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                  <th className="px-4 py-3">–î–∞—Ç–∞ –ø–æ–¥–∞—á–∏</th>
                  <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                  <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
              </thead>
              <tbody>
                {filteredApplications.map(app => (
                  <tr key={app.id} className="bg-white border-b">
                    <td className="px-4 py-3 font-medium">{app.student}</td>
                    <td className="px-4 py-3">{app.type}</td>
                    <td className="px-4 py-3">{app.category}</td>
                    <td className="px-4 py-3">{app.title}</td>
                    <td className="px-4 py-3">{app.date}</td>
                    <td className="px-4 py-3">
                      <span className={`px-2 py-1 rounded text-xs ${
                        app.status === '–ù–æ–≤—ã–µ' ? 'bg-blue-100 text-blue-800' :
                        app.status === '–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ' ? 'bg-green-100 text-green-800' :
                        'bg-gray-100 text-gray-800'
                      }`}>
                        {app.status}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => handleCheck(app)}
                        className="text-indigo-600 hover:text-indigo-900 font-medium"
                      >
                        –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞—è–≤–∫–∏ */}
        {checkModalOpen && selectedApplication && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                <button onClick={() => setCheckModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <div className="text-sm text-gray-600 mb-1">–°—Ç—É–¥–µ–Ω—Ç:</div>
                  <div className="font-medium">{selectedApplication.student}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–¢–∏–ø:</div>
                  <div className="font-medium">{selectedApplication.type}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</div>
                  <div className="font-medium">{selectedApplication.category}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ:</div>
                  <div className="font-medium">{selectedApplication.title}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–î–∞—Ç–∞ –ø–æ–¥–∞—á–∏:</div>
                  <div className="font-medium">{selectedApplication.date}</div>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–°—Ç–∞—Ç—É—Å *</label>
                  <select
                    value={checkStatus}
                    onChange={(e) => setCheckStatus(e.target.value)}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ</option>
                    <option value="–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ">–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ</option>
                    <option value="–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É">–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É</option>
                  </select>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setCheckModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleUpdateStatus} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ–±—ã—Ç–∏–π (–∫—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞ –∏ –∫—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏)
  function EventsPage({ currentRole }) {
    const [activeTab, setActiveTab] = useState('events');
    const [eventModalOpen, setEventModalOpen] = useState(false);
    const [editModalOpen, setEditModalOpen] = useState(false);
    const [selectedEvent, setSelectedEvent] = useState(null);
    const [eventForm, setEventForm] = useState({ title: '', type: '', date: '', time: '', points: '', category: '' });
    const [editForm, setEditForm] = useState({ title: '', type: '', date: '', time: '', status: '' });
    const [editMode, setEditMode] = useState(false);
    const [events, setEvents] = useState(DEMO_DATA.events);

    const handleCreateEvent = () => {
      setEventForm({ title: '', type: '', date: '', time: '', points: '', category: '' });
      setEventModalOpen(true);
    };

    const handleEditEvent = (event) => {
      setSelectedEvent(event);
      setEditForm({ 
        title: event.title, 
        type: event.type, 
        date: event.date, 
        time: '10:00',
        status: event.status 
      });
      setEditModalOpen(true);
    };

    const handleSubmitEvent = () => {
      if (eventForm.title && eventForm.date && eventForm.time && eventForm.type) {
        const newEvent = {
          id: events.length + 1,
          ...eventForm,
          participants: 0,
          status: '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ'
        };
        setEvents([...events, newEvent]);
        setEventForm({ title: '', type: '', date: '', time: '', points: '', category: '' });
        setEventModalOpen(false);
        alert(`–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ "${eventForm.title}" —Å–æ–∑–¥–∞–Ω–æ`);
      } else {
        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è');
      }
    };

    const handleUpdateEvent = () => {
      if (editForm.title && editForm.date && editForm.time) {
        setEvents(events.map(event => 
          event.id === selectedEvent.id ? { ...event, ...editForm } : event
        ));
        setEditModalOpen(false);
        setSelectedEvent(null);
        alert(`–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ "${editForm.title}" –æ–±–Ω–æ–≤–ª–µ–Ω–æ`);
      } else {
        alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
      }
    };

    const handleExportExcel = () => {
      alert('–î–∞–Ω–Ω—ã–µ –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ Excel (—ç–º—É–ª—è—Ü–∏—è)');
    };

    const handleImportExcel = () => {
      alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö (—ç–º—É–ª—è—Ü–∏—è)');
    };

    const handleDeleteEvent = (eventId) => {
      if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ?')) {
        setEvents(events.filter(event => event.id !== eventId));
        alert('–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ —É–¥–∞–ª–µ–Ω–æ');
      }
    };

    const handleFieldEdit = (eventId, field, value) => {
      if (editMode) {
        setEvents(events.map(event => 
          event.id === eventId ? { ...event, [field]: value } : event
        ));
      }
    };
    
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <div className="flex justify-between items-center mb-4">
            <h2 className="text-xl font-bold">
              {currentRole === ROLES.UNIVERSITY_CURATOR ? '–°–æ–±—ã—Ç–∏—è' : '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è'}
            </h2>
            <div className="flex gap-2">
              {/* –ù–æ–≤—ã–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è Excel */}
              <button 
                onClick={handleExportExcel} 
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2 tt"
                data-tip="–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ Excel"
              >
                <span>‚¨ÜÔ∏è</span> Excel
              </button>
              <button 
                onClick={handleImportExcel} 
                className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 tt"
                data-tip="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Excel"
              >
                <span>‚¨áÔ∏è</span> Excel
              </button>
              
              {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}
              <button 
                onClick={() => setEditMode(!editMode)}
                className={`px-4 py-2 rounded flex items-center gap-2 ${
                  editMode ? 'bg-red-600 text-white' : 'bg-gray-600 text-white'
                }`}
              >
                <span>{editMode ? '‚úÖ' : '‚úèÔ∏è'}</span>
                {editMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' : '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'}
              </button>

              {currentRole === ROLES.COMPANY_CURATOR && (
                <button onClick={handleCreateEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2">
                  <span>+</span> –°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ
                </button>
              )}
              {currentRole === ROLES.UNIVERSITY_CURATOR && (
                <button onClick={handleCreateEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2">
                  <span>+</span> –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
                </button>
              )}
            </div>
          </div>
          
          {currentRole === ROLES.UNIVERSITY_CURATOR && (
            <div className="mb-4 flex border-b">
              <button 
                onClick={() => setActiveTab('events')}
                className={`px-4 py-2 font-medium ${activeTab === 'events' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
              >
                –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
              </button>
              <button 
                onClick={() => setActiveTab('projects')}
                className={`px-4 py-2 font-medium ${activeTab === 'projects' ? 'text-indigo-600 border-b-2 border-indigo-600' : 'text-gray-500'}`}
              >
                –ü—Ä–æ–µ–∫—Ç—ã
              </button>
              <button className="ml-auto flex items-center gap-1 text-indigo-600">
                <span>üìÖ</span> –ö–∞–ª–µ–Ω–¥–∞—Ä—å
              </button>
            </div>
          )}
          
          <div className="overflow-x-auto">
            <table className="w-full text-sm text-left">
              <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th className="px-4 py-3">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                  <th className="px-4 py-3">–¢–∏–ø</th>
                  <th className="px-4 py-3">–î–∞—Ç—ã</th>
                  <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                  <th className="px-4 py-3">–£—á–∞—Å—Ç–Ω–∏–∫–∏</th>
                  {currentRole === ROLES.COMPANY_CURATOR && (
                    <>
                      <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                      <th className="px-4 py-3">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                    </>
                  )}
                  {editMode && <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>}
                </tr>
              </thead>
              <tbody>
                {events.map(event => (
                  <tr key={event.id} className="bg-white border-b">
                    <td className="px-4 py-3">
                      {editMode ? (
                        <input
                          type="text"
                          value={event.title}
                          onChange={(e) => handleFieldEdit(event.id, 'title', e.target.value)}
                          className="w-full px-2 py-1 border rounded"
                        />
                      ) : (
                        <span className="font-medium">{event.title}</span>
                      )}
                    </td>
                    <td className="px-4 py-3">
                      {editMode ? (
                        <select
                          value={event.type}
                          onChange={(e) => handleFieldEdit(event.id, 'type', e.target.value)}
                          className="w-full px-2 py-1 border rounded"
                        >
                          <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä</option>
                          <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø</option>
                          <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω</option>
                          <option value="–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                        </select>
                      ) : (
                        event.type
                      )}
                    </td>
                    <td className="px-4 py-3">
                      {editMode ? (
                        <input
                          type="date"
                          value={event.date}
                          onChange={(e) => handleFieldEdit(event.id, 'date', e.target.value)}
                          className="w-full px-2 py-1 border rounded"
                        />
                      ) : (
                        event.date
                      )}
                    </td>
                    <td className="px-4 py-3">
                      {editMode ? (
                        <select
                          value={event.status}
                          onChange={(e) => handleFieldEdit(event.id, 'status', e.target.value)}
                          className="w-full px-2 py-1 border rounded"
                        >
                          <option value="–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</option>
                          <option value="–ó–∞–≤–µ—Ä—à–µ–Ω–æ">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                        </select>
                      ) : (
                        <span className={`px-2 py-1 rounded text-xs ${
                          event.status === '–ó–∞–≤–µ—Ä—à–µ–Ω–æ' ? 'bg-green-100 text-green-800' : 
                          event.status === '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ' ? 'bg-blue-100 text-blue-800' : 
                          'bg-gray-100 text-gray-800'
                        }`}>
                          {event.status}
                        </span>
                      )}
                    </td>
                    <td className="px-4 py-3">
                      {editMode ? (
                        <input
                          type="number"
                          value={event.participants}
                          onChange={(e) => handleFieldEdit(event.id, 'participants', parseInt(e.target.value))}
                          className="w-full px-2 py-1 border rounded"
                        />
                      ) : (
                        event.participants
                      )}
                    </td>
                    {currentRole === ROLES.COMPANY_CURATOR && (
                      <>
                        <td className="px-4 py-3">
                          {editMode ? (
                            <input
                              type="number"
                              value={event.points}
                              onChange={(e) => handleFieldEdit(event.id, 'points', parseInt(e.target.value))}
                              className="w-full px-2 py-1 border rounded"
                            />
                          ) : (
                            event.points || '‚Äî'
                          )}
                        </td>
                        <td className="px-4 py-3">
                          {editMode ? (
                            <select
                              value={event.category}
                              onChange={(e) => handleFieldEdit(event.id, 'category', e.target.value)}
                              className="w-full px-2 py-1 border rounded"
                            >
                              <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                              <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                            </select>
                          ) : (
                            event.category || '‚Äî'
                          )}
                        </td>
                      </>
                    )}
                    {editMode && (
                      <td className="px-4 py-3">
                        <button 
                          onClick={() => handleDeleteEvent(event.id)}
                          className="text-red-600 hover:text-red-900 font-medium text-lg"
                          title="–£–¥–∞–ª–∏—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ"
                        >
                          ‚ùå
                        </button>
                      </td>
                    )}
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏) */}
        {eventModalOpen && currentRole === ROLES.COMPANY_CURATOR && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–°–æ–∑–¥–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h3>
                <button onClick={() => setEventModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                  <input
                    type="text"
                    value={eventForm.title}
                    onChange={(e) => setEventForm({...eventForm, title: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–¢–∏–ø *</label>
                  <select
                    value={eventForm.type}
                    onChange={(e) => setEventForm({...eventForm, type: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø --</option>
                    <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä</option>
                    <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø</option>
                    <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω</option>
                    <option value="–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                  </select>
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium mb-1">–î–∞—Ç–∞ *</label>
                    <input
                      type="date"
                      value={eventForm.date}
                      onChange={(e) => setEventForm({...eventForm, date: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">–í—Ä–µ–º—è *</label>
                    <input
                      type="time"
                      value={eventForm.time}
                      onChange={(e) => setEventForm({...eventForm, time: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–ë–∞–ª–ª—ã</label>
                  <select
                    value={eventForm.points}
                    onChange={(e) => setEventForm({...eventForm, points: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –±–∞–ª–ª—ã --</option>
                    <option value="10">10</option>
                    <option value="20">20</option>
                  </select>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                  <select
                    value={eventForm.category}
                    onChange={(e) => setEventForm({...eventForm, category: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é --</option>
                    <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                    <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ</option>
                  </select>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setEventModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –°–æ–∑–¥–∞—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –í–£–ó–∞) */}
        {eventModalOpen && currentRole === ROLES.UNIVERSITY_CURATOR && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h3>
                <button onClick={() => setEventModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                  <input
                    type="text"
                    value={eventForm.title}
                    onChange={(e) => setEventForm({...eventForm, title: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                  <textarea
                    value={eventForm.description}
                    onChange={(e) => setEventForm({...eventForm, description: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    rows="4"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è"
                  />
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium mb-1">–î–∞—Ç–∞ *</label>
                    <input
                      type="date"
                      value={eventForm.date}
                      onChange={(e) => setEventForm({...eventForm, date: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">–í—Ä–µ–º—è *</label>
                    <input
                      type="time"
                      value={eventForm.time}
                      onChange={(e) => setEventForm({...eventForm, time: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setEventModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏) */}
        {editModalOpen && selectedEvent && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</h3>
                <button onClick={() => setEditModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                  <input
                    type="text"
                    value={editForm.title}
                    onChange={(e) => setEditForm({...editForm, title: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–¢–∏–ø *</label>
                  <select
                    value={editForm.type}
                    onChange={(e) => setEditForm({...editForm, type: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä</option>
                    <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø</option>
                    <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω</option>
                    <option value="–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è">–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è</option>
                  </select>
                </div>
                <div className="grid grid-cols-2 gap-4">
                  <div>
                    <label className="block text-sm font-medium mb-1">–î–∞—Ç–∞ *</label>
                    <input
                      type="date"
                      value={editForm.date}
                      onChange={(e) => setEditForm({...editForm, date: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium mb-1">–í—Ä–µ–º—è *</label>
                    <input
                      type="time"
                      value={editForm.time}
                      onChange={(e) => setEditForm({...editForm, time: e.target.value})}
                      className="w-full px-3 py-2 border rounded"
                    />
                  </div>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–°—Ç–∞—Ç—É—Å</label>
                  <select
                    value={editForm.status}
                    onChange={(e) => setEditForm({...editForm, status: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</option>
                    <option value="–ó–∞–≤–µ—Ä—à–µ–Ω–æ">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                  </select>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setEditModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleUpdateEvent} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
function UsersPage() {
  const [addUserModalOpen, setAddUserModalOpen] = useState(false);
  const [userForm, setUserForm] = useState({ name: '', email: '', role: '', organization: '' });
  const [editMode, setEditMode] = useState(false);
  const [searchQuery, setSearchQuery] = useState('');
  const [filterRole, setFilterRole] = useState('all');
  const [filterStatus, setFilterStatus] = useState('all');
  const [filterOrganization, setFilterOrganization] = useState('all');
  const [users, setUsers] = useState([
    { 
      id: 1, 
      name: '–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è', 
      email: 'petrova@university.ru', 
      role: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞', 
      organization: '–°–ü–ë–ü–£', 
      status: 'active', 
      lastLogin: '12.11.2023 14:30',
      phone: '+7 (911) 123-45-67'
    },
    { 
      id: 2, 
      name: '–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π', 
      email: 'sidorov@gazprom-neft.ru', 
      role: '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏', 
      organization: '–ì–∞–∑–ø—Ä–æ–º –Ω–µ—Ñ—Ç—å', 
      status: 'active', 
      lastLogin: '11.11.2023 10:15',
      phone: '+7 (912) 234-56-78'
    },
    { 
      id: 3, 
      name: '–ö–æ–∑–ª–æ–≤–∞ –ê–Ω–Ω–∞', 
      email: 'kozlova@expert.ru', 
      role: '–≠–∫—Å–ø–µ—Ä—Ç', 
      organization: '–ù–û–¶', 
      status: 'active', 
      lastLogin: '10.11.2023 16:45',
      phone: '+7 (913) 345-67-89'
    },
    { 
      id: 4, 
      name: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω', 
      email: 'ivanov@committee.ru', 
      role: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å', 
      organization: '–ö–æ–º–∏—Å—Å–∏—è', 
      status: 'blocked', 
      lastLogin: '05.11.2023 09:20',
      phone: '+7 (914) 456-78-90'
    },
    { 
      id: 5, 
      name: '–°–º–∏—Ä–Ω–æ–≤ –î–º–∏—Ç—Ä–∏–π', 
      email: 'smirnov@itmo.ru', 
      role: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞', 
      organization: '–ò–¢–ú–û', 
      status: 'active', 
      lastLogin: '09.11.2023 11:30',
      phone: '+7 (915) 567-89-01'
    }
  ]);

  const organizations = [...new Set(users.map(user => user.organization))];
  const roles = [...new Set(users.map(user => user.role))];

  const handleAddUser = () => {
    setAddUserModalOpen(true);
  };

  const handleSubmitUser = () => {
    if (userForm.name && userForm.email && userForm.role) {
      const newUser = {
        id: users.length + 1,
        name: userForm.name,
        email: userForm.email,
        role: userForm.role,
        organization: userForm.organization || '–ù–µ —É–∫–∞–∑–∞–Ω–∞',
        status: 'active',
        lastLogin: new Date().toLocaleDateString('ru-RU') + ' ' + new Date().toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'}),
        phone: '+7 (XXX) XXX-XX-XX'
      };
      setUsers([...users, newUser]);
      setUserForm({ name: '', email: '', role: '', organization: '' });
      setAddUserModalOpen(false);
      alert(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å "${userForm.name}" –¥–æ–±–∞–≤–ª–µ–Ω`);
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –§–ò–û, Email –∏ –†–æ–ª—å');
    }
  };

  const handleToggleStatus = (userId) => {
    setUsers(users.map(user => 
      user.id === userId 
        ? { ...user, status: user.status === 'active' ? 'blocked' : 'active' }
        : user
    ));
  };

  const handleDeleteUser = (userId) => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?')) {
      setUsers(users.filter(user => user.id !== userId));
      alert('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω');
    }
  };

  const handleFieldEdit = (userId, field, value) => {
    if (editMode) {
      setUsers(users.map(user => 
        user.id === userId ? { ...user, [field]: value } : user
      ));
    }
  };

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  const filteredUsers = users.filter(user => {
    const matchesSearch = user.name.toLowerCase().includes(searchQuery.toLowerCase()) || 
                         user.email.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesRole = filterRole === 'all' || user.role === filterRole;
    const matchesStatus = filterStatus === 'all' || 
                         (filterStatus === 'active' && user.status === 'active') ||
                         (filterStatus === 'blocked' && user.status === 'blocked');
    const matchesOrganization = filterOrganization === 'all' || user.organization === filterOrganization;
    
    return matchesSearch && matchesRole && matchesStatus && matchesOrganization;
  });

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-bold">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
          <div className="flex gap-2">
            <button 
              onClick={() => setEditMode(!editMode)}
              className={`px-4 py-2 rounded flex items-center gap-2 ${
                editMode ? 'bg-red-600 text-white' : 'bg-gray-600 text-white'
              }`}
            >
              <span>{editMode ? '‚úÖ' : '‚úèÔ∏è'}</span>
              {editMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' : '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'}
            </button>
            <button onClick={handleAddUser} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2">
              <span>+</span> –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            </button>
          </div>
        </div>
        
        <div className="mb-4 flex flex-wrap gap-2">
          <input 
            type="text" 
            placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û –∏–ª–∏ email..." 
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          />
          <select 
            value={filterRole}
            onChange={(e) => setFilterRole(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ —Ä–æ–ª–∏</option>
            {roles.map(role => (
              <option key={role} value={role}>{role}</option>
            ))}
          </select>
          <select 
            value={filterStatus}
            onChange={(e) => setFilterStatus(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
            <option value="active">–ê–∫—Ç–∏–≤–µ–Ω</option>
            <option value="blocked">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω</option>
          </select>
          <select 
            value={filterOrganization}
            onChange={(e) => setFilterOrganization(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</option>
            {organizations.map(org => (
              <option key={org} value={org}>{org}</option>
            ))}
          </select>
        </div>
        
        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–§–ò–û</th>
                <th className="px-4 py-3">Email</th>
                <th className="px-4 py-3">–†–æ–ª—å</th>
                <th className="px-4 py-3">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</th>
                <th className="px-4 py-3">–¢–µ–ª–µ—Ñ–æ–Ω</th>
                <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                <th className="px-4 py-3">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥</th>
                <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              {filteredUsers.map(user => (
                <tr key={user.id} className={`border-b ${user.status === 'blocked' ? 'bg-gray-50 text-gray-400' : 'bg-white'}`}>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={user.name}
                        onChange={(e) => handleFieldEdit(user.id, 'name', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className={`font-medium ${user.status === 'blocked' ? 'text-gray-400' : ''}`}>
                        {user.name}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="email"
                        value={user.email}
                        onChange={(e) => handleFieldEdit(user.id, 'email', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className={user.status === 'blocked' ? 'text-gray-400' : ''}>
                        {user.email}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={user.role}
                        onChange={(e) => handleFieldEdit(user.id, 'role', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞">–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞</option>
                        <option value="–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏">–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏</option>
                        <option value="–≠–∫—Å–ø–µ—Ä—Ç">–≠–∫—Å–ø–µ—Ä—Ç</option>
                        <option value="–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å">–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å</option>
                        <option value="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                      </select>
                    ) : (
                      <span className={`px-2 py-1 rounded text-xs ${
                        user.role === '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞' ? 'bg-blue-100 text-blue-800' :
                        user.role === '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏' ? 'bg-purple-100 text-purple-800' :
                        user.role === '–≠–∫—Å–ø–µ—Ä—Ç' ? 'bg-yellow-100 text-yellow-800' :
                        user.role === '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å' ? 'bg-green-100 text-green-800' :
                        'bg-gray-100 text-gray-800'
                      } ${user.status === 'blocked' ? 'opacity-50' : ''}`}>
                        {user.role}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={user.organization}
                        onChange={(e) => handleFieldEdit(user.id, 'organization', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className={user.status === 'blocked' ? 'text-gray-400' : ''}>
                        {user.organization}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="tel"
                        value={user.phone}
                        onChange={(e) => handleFieldEdit(user.id, 'phone', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className={user.status === 'blocked' ? 'text-gray-400' : ''}>
                        {user.phone}
                      </span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    <span className={`px-2 py-1 rounded text-xs ${
                      user.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-300 text-gray-500'
                    }`}>
                      {user.status === 'active' ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω'}
                    </span>
                  </td>
                  <td className="px-4 py-3">
                    <span className={user.status === 'blocked' ? 'text-gray-400' : ''}>
                      {user.lastLogin}
                    </span>
                  </td>
                  <td className="px-4 py-3">
                    <div className="flex flex-col gap-1">
                      <button 
                        onClick={() => handleToggleStatus(user.id)}
                        className={`text-sm font-medium ${
                          user.status === 'active' 
                            ? 'text-red-600 hover:text-red-900' 
                            : 'text-green-600 hover:text-green-900'
                        }`}
                      >
                        {user.status === 'active' ? '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' : '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å'}
                      </button>
                      {editMode && (
                        <button 
                          onClick={() => handleDeleteUser(user.id)}
                          className="text-red-600 hover:text-red-900 font-medium text-sm"
                        >
                          –£–¥–∞–ª–∏—Ç—å
                        </button>
                      )}
                    </div>
                  </td>
                </tr>
              ))}
              {filteredUsers.length === 0 && (
                <tr>
                  <td colSpan="8" className="px-4 py-3 text-center text-gray-500">
                    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                  </td>
                </tr>
              )}
            </tbody>
          </table>
        </div>

        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
        <div className="mt-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
          <div className="bg-blue-50 p-3 rounded">
            <div className="text-xl font-bold text-blue-700">{users.length}</div>
            <div className="text-sm text-blue-600">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
          </div>
          <div className="bg-green-50 p-3 rounded">
            <div className="text-xl font-bold text-green-700">
              {users.filter(u => u.status === 'active').length}
            </div>
            <div className="text-sm text-green-600">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
          </div>
          <div className="bg-gray-100 p-3 rounded">
            <div className="text-xl font-bold text-gray-700">
              {users.filter(u => u.status === 'blocked').length}
            </div>
            <div className="text-sm text-gray-600">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö</div>
          </div>
          <div className="bg-purple-50 p-3 rounded">
            <div className="text-xl font-bold text-purple-700">
              {organizations.length}
            </div>
            <div className="text-sm text-purple-600">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π</div>
          </div>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */}
      {addUserModalOpen && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-lg">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
              <button onClick={() => setAddUserModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">–§–ò–û *</label>
                <input
                  type="text"
                  value={userForm.name}
                  onChange={(e) => setUserForm({...userForm, name: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –§–ò–û"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">Email *</label>
                <input
                  type="email"
                  value={userForm.email}
                  onChange={(e) => setUserForm({...userForm, email: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ email"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–†–æ–ª—å *</label>
                <select
                  value={userForm.role}
                  onChange={(e) => setUserForm({...userForm, role: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å --</option>
                  <option value="–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞">–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞</option>
                  <option value="–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏">–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏</option>
                  <option value="–≠–∫—Å–ø–µ—Ä—Ç">–≠–∫—Å–ø–µ—Ä—Ç</option>
                  <option value="–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å">–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å</option>
                  <option value="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</label>
                <input
                  type="text"
                  value={userForm.organization}
                  onChange={(e) => setUserForm({...userForm, organization: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏"
                />
              </div>
              <div className="flex justify-end gap-2">
                <button onClick={() => setAddUserModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button onClick={handleSubmitUser} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                  –î–æ–±–∞–≤–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä)
  function DocumentsPage() {
    const [checkModalOpen, setCheckModalOpen] = useState(false);
    const [selectedDocument, setSelectedDocument] = useState(null);
    const [docStatus, setDocStatus] = useState('–ü—Ä–∏–Ω—è—Ç–æ');

    const documents = [
      { id: 1, sender: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', doc: '–†–µ–∑—é–º–µ_–ò–≤–∞–Ω–æ–≤.pdf', date: '12.11.2023', status: '–í –æ–∂–∏–¥–∞–Ω–∏–∏' },
      { id: 2, sender: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', doc: '–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç_Python.pdf', date: '11.11.2023', status: '–í –æ–∂–∏–¥–∞–Ω–∏–∏' },
      { id: 3, sender: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', doc: '–î–∏–ø–ª–æ–º_–•–∞–∫–∞—Ç–æ–Ω.pdf', date: '10.11.2023', status: '–ü—Ä–∏–Ω—è—Ç–æ' },
    ];

    const handleCheck = (doc) => {
      setSelectedDocument(doc);
      setDocStatus(doc.status === '–í –æ–∂–∏–¥–∞–Ω–∏–∏' ? '–ü—Ä–∏–Ω—è—Ç–æ' : doc.status);
      setCheckModalOpen(true);
    };

    const handleUpdateStatus = () => {
      if (selectedDocument) {
        alert(`–°—Ç–∞—Ç—É—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞ "${selectedDocument.doc}" –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ "${docStatus}" (—ç–º—É–ª—è—Ü–∏—è)`);
        setCheckModalOpen(false);
        setSelectedDocument(null);
      }
    };

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É</h2>
          
          <div className="mb-4 flex flex-wrap gap-2">
            <select className="px-3 py-2 border rounded text-sm">
              <option>–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
              <option>–í –æ–∂–∏–¥–∞–Ω–∏–∏</option>
              <option>–ü—Ä–∏–Ω—è—Ç–æ</option>
              <option>–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</option>
            </select>
            <input 
              type="date" 
              className="px-3 py-2 border rounded text-sm"
            />
          </div>
          
          <div className="overflow-x-auto">
            <table className="w-full text-sm text-left">
              <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th className="px-4 py-3">‚Ññ</th>
                  <th className="px-4 py-3">–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å</th>
                  <th className="px-4 py-3">–î–æ–∫—É–º–µ–Ω—Ç</th>
                  <th className="px-4 py-3">–î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏</th>
                  <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                  <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
              </thead>
              <tbody>
                {documents.map(doc => (
                  <tr key={doc.id} className="bg-white border-b">
                    <td className="px-4 py-3">{doc.id}</td>
                    <td className="px-4 py-3 font-medium">{doc.sender}</td>
                    <td className="px-4 py-3">
                      <button className="text-indigo-600 hover:text-indigo-900 flex items-center gap-1">
                        <span>üìé</span> {doc.doc}
                      </button>
                    </td>
                    <td className="px-4 py-3">{doc.date}</td>
                    <td className="px-4 py-3">
                      <span className={`px-2 py-1 rounded text-xs ${
                        doc.status === '–í –æ–∂–∏–¥–∞–Ω–∏–∏' ? 'bg-yellow-100 text-yellow-800' :
                        doc.status === '–ü—Ä–∏–Ω—è—Ç–æ' ? 'bg-green-100 text-green-800' :
                        'bg-red-100 text-red-800'
                      }`}>
                        {doc.status}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      {doc.status === '–í –æ–∂–∏–¥–∞–Ω–∏–∏' ? (
                        <button 
                          onClick={() => handleCheck(doc)}
                          className="px-3 py-1 bg-indigo-600 text-white rounded text-sm"
                        >
                          –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                      ) : (
                        <button className="px-3 py-1 bg-gray-400 text-white rounded text-sm" disabled>
                          –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ
                        </button>
                      )}
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        </div>

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞ */}
        {checkModalOpen && selectedDocument && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞</h3>
                <button onClick={() => setCheckModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <div className="text-sm text-gray-600 mb-1">–û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å:</div>
                  <div className="font-medium">{selectedDocument.sender}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–î–æ–∫—É–º–µ–Ω—Ç:</div>
                  <div className="font-medium">{selectedDocument.doc}</div>
                </div>
                <div>
                  <div className="text-sm text-gray-600 mb-1">–î–∞—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:</div>
                  <div className="font-medium">{selectedDocument.date}</div>
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–°—Ç–∞—Ç—É—Å *</label>
                  <select
                    value={docStatus}
                    onChange={(e) => setDocStatus(e.target.value)}
                    className="w-full px-3 py-2 border rounded"
                  >
                    <option value="–ü—Ä–∏–Ω—è—Ç–æ">–ü—Ä–∏–Ω—è—Ç–æ</option>
                    <option value="–û—Ç–∫–ª–æ–Ω–µ–Ω–æ">–û—Ç–∫–ª–æ–Ω–µ–Ω–æ</option>
                  </select>
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setCheckModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleUpdateStatus} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  function SupportPage({ onOpenSupportModal }) {
    return (
      <div className="p-6 flex items-center justify-center">
        <div className="bg-white card-shadow p-8 rounded-lg text-center max-w-lg w-full">
          <div className="text-lg font-semibold mb-4">–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</div>
          <div className="mb-6 text-sm text-gray-500">–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã ‚Äî –Ω–∞–ø–∏—à–∏—Ç–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É.</div>
          <button 
            onClick={onOpenSupportModal} 
            className="px-6 py-3 bg-blue-600 text-white rounded-lg text-sm font-semibold shadow hover:bg-blue-700"
          >
            –ù–∞–ø–∏—Å–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–µ
          </button>
        </div>
      </div>
    );
  }

  // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
  function SupportModal({ open, onClose }) {
    const [text, setText] = useState('');
    if(!open) return null;
    return (
      <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
        <div className="bg-white rounded p-6 w-full max-w-lg">
          <div className="flex items-center justify-between">
            <div className="font-semibold">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
            <button onClick={onClose} className="text-gray-500">‚úï</button>
          </div>
          <textarea 
            value={text} 
            onChange={(e)=>setText(e.target.value)} 
            maxLength={1000} 
            rows={6} 
            className="w-full border p-3 rounded mt-4" 
            placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É (–¥–æ 1000 —Å–∏–º–≤–æ–ª–æ–≤)"
          ></textarea>
          <div className="mt-4 flex justify-center">
            <button 
              onClick={()=>{ 
                alert('–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (—ç–º—É–ª—è—Ü–∏—è)'); 
                setText(''); 
                onClose(); 
              }} 
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
            >
              –û—Ç–ø—Ä–∞–≤–∏—Ç—å
            </button>
          </div>
        </div>
      </div>
    );
  }

  /* ------------------ –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—É–¥–µ–Ω—Ç–∞ ------------------ */

  function StudentCoursesPage() {
    const [mode, setMode] = useState('mine');
    const [filterType, setFilterType] = useState('all');
    const [filterStatus, setFilterStatus] = useState('all');
    const [query, setQuery] = useState('');
    const coursesMine = [
      { id:1, title:'–û—Å–Ω–æ–≤—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏', status:'–ó–∞–≤–µ—Ä—à—ë–Ω', points:20, type:'–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π' },
      { id:2, title:'Python –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π', status:'–í –ø—Ä–æ—Ü–µ—Å—Å–µ', points:20, type:'–†–µ–∫–æ–º–µ–Ω–¥.' },
      { id:3, title:'Java', status:'–ù–µ –∑–∞–≤–µ—Ä—à—ë–Ω', points:0, type:'–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π' },
    ];
    const coursesAll = [
      ...coursesMine,
      { id:4, title:'–í–≤–µ–¥–µ–Ω–∏–µ –≤ ML', status:'–ù–µ –Ω–∞—á–∞—Ç', points:0, type:'–†–µ–∫–æ–º–µ–Ω–¥.' },
      { id:5, title:'–î–∏–∑–∞–π–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤', status:'–ù–µ –Ω–∞—á–∞—Ç', points:0, type:'–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π' },
    ];
    const list = mode==='mine' ? coursesMine : coursesAll;
    const filtered = list.filter(c=> (filterType==='all' || c.type===filterType) && (filterStatus==='all' || c.status===filterStatus) && c.title.toLowerCase().includes(query.toLowerCase()));

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-4 space-y-4">
          <div className="flex items-center gap-4">
            <div className="flex items-center gap-2">
              <button onClick={()=>setMode('mine')} className={`px-3 py-2 rounded ${mode==='mine' ? 'bg-blue-600 text-white' : 'bg-blue-50 text-blue-700'}`}>–ú–æ–∏ –∫—É—Ä—Å—ã</button>
              <button onClick={()=>setMode('all')} className={`px-3 py-2 rounded ${mode==='all' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'}`}>–í—Å–µ –∫—É—Ä—Å—ã</button>
            </div>
            <div className="ml-auto flex gap-2">
              <select value={filterType} onChange={(e)=>setFilterType(e.target.value)} className="p-2 border rounded text-sm">
                <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</option>
                <option value="–†–µ–∫–æ–º–µ–Ω–¥.">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ</option>
                <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</option>
              </select>
              <select value={filterStatus} onChange={(e)=>setFilterStatus(e.target.value)} className="p-2 border rounded text-sm">
                <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                <option>–ó–∞–≤–µ—Ä—à—ë–Ω</option>
                <option>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                <option>–ù–µ –∑–∞–≤–µ—Ä—à—ë–Ω</option>
                <option>–ù–µ –Ω–∞—á–∞—Ç</option>
              </select>
            </div>
          </div>

          <div className="flex items-center gap-3">
            <input value={query} onChange={(e)=>setQuery(e.target.value)} placeholder="–ü–æ–∏—Å–∫ –∫—É—Ä—Å–æ–≤..." className="flex-1 p-2 border rounded" />
          </div>

          <div className="overflow-auto">
            <table className="w-full text-left text-sm">
              <thead className="text-xs text-gray-500 border-b"><tr><th className="py-2">–ö—É—Ä—Å</th><th className="py-2">–°—Ç–∞—Ç—É—Å</th><th className="py-2">–ë–∞–ª–ª—ã</th></tr></thead>
              <tbody>
                {filtered.map(c => (
                  <tr key={c.id} className="border-b">
                    <td className="py-3">{c.title}</td>
                    <td className="py-3">{c.status}</td>
                    <td className="py-3 font-semibold">{c.points}</td>
                  </tr>
                ))}
                {filtered.length===0 && <tr><td colSpan="3" className="py-4 text-center text-gray-400">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</td></tr>}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    );
  }

  function StudentEventsPage() {
    const [mode, setMode] = useState('mine');
    const [filterType, setFilterType] = useState('all');
    const [filterStatus, setFilterStatus] = useState('all');
    const [filterMandatory, setFilterMandatory] = useState('all');
    const [query, setQuery] = useState('');

    const all = [
      { id:1, title:'–°–µ–º–∏–Ω–∞—Ä –ø–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ', date:'2025-11-03', points:10, status:'–ó–∞–ø–∏—Å–∞–Ω', type: '–°–µ–º–∏–Ω–∞—Ä', mandatory:'–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' },
      { id:2, title:'–í–æ—Ä–∫—à–æ–ø –ø–æ SQL', date:'2025-11-10', points:10, status:'–ù–µ –∑–∞–ø–∏—Å–∞–Ω', type: '–í–æ—Ä–∫—à–æ–ø', mandatory:'–†–µ–∫–æ–º–µ–Ω–¥.' },
      { id:3, title:'–•–∞–∫–∞—Ç–æ–Ω Data', date:'2025-12-01', points:20, status:'–ó–∞–ø–∏—Å–∞–Ω', type: '–•–∞–∫–∞—Ç–æ–Ω', mandatory:'–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ' },
    ];
    const mine = all.filter(a => a.status==='–ó–∞–ø–∏—Å–∞–Ω');

    const list = mode==='mine' ? mine : all;
    const filtered = list.filter(e => 
      e.title.toLowerCase().includes(query.toLowerCase()) &&
      (filterStatus==='all' || e.status===filterStatus) &&
      (filterType==='all' || e.type===filterType) &&
      (filterMandatory==='all' || e.mandatory===filterMandatory)
    );

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-4 space-y-4">
          <div className="flex items-center gap-4">
            <div className="flex items-center gap-2">
              <button onClick={()=>setMode('mine')} className={`px-3 py-2 rounded ${mode==='mine' ? 'bg-blue-600 text-white' : 'bg-blue-50 text-blue-700'}`}>–ú–æ–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</button>
              <button onClick={()=>setMode('all')} className={`px-3 py-2 rounded ${mode==='all' ? 'bg-blue-600 text-white' : 'bg-gray-100 text-gray-700'}`}>–í—Å–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</button>
            </div>
            <div className="ml-auto flex gap-2">
              <select value={filterType} onChange={(e)=>setFilterType(e.target.value)} className="p-2 border rounded text-sm">
                <option value="all">–í—Å–µ —Ç–∏–ø—ã</option>
                <option value="–°–µ–º–∏–Ω–∞—Ä">–°–µ–º–∏–Ω–∞—Ä—ã</option>
                <option value="–í–æ—Ä–∫—à–æ–ø">–í–æ—Ä–∫—à–æ–ø—ã</option>
                <option value="–•–∞–∫–∞—Ç–æ–Ω">–•–∞–∫–∞—Ç–æ–Ω—ã</option>
              </select>
              <select value={filterStatus} onChange={(e)=>setFilterStatus(e.target.value)} className="p-2 border rounded text-sm">
                <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                <option value="–ó–∞–ø–∏—Å–∞–Ω">–ó–∞–ø–∏—Å–∞–Ω</option>
                <option value="–ù–µ –∑–∞–ø–∏—Å–∞–Ω">–ù–µ –∑–∞–ø–∏—Å–∞–Ω</option>
              </select>
              <select value={filterMandatory} onChange={(e)=>setFilterMandatory(e.target.value)} className="p-2 border rounded text-sm">
                <option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                <option value="–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</option>
                <option value="–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ</option>
                <option value="–†–µ–∫–æ–º–µ–Ω–¥.">–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ</option>
              </select>
            </div>
          </div>

          <div className="flex items-center gap-3">
            <input value={query} onChange={(e)=>setQuery(e.target.value)} placeholder="–ü–æ–∏—Å–∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π..." className="flex-1 p-2 border rounded" />
          </div>

          <div className="overflow-auto">
            <table className="w-full text-left text-sm">
              <thead className="text-xs text-gray-500 border-b">
                <tr>
                  <th className="py-2">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</th>
                  <th className="py-2">–î–∞—Ç–∞</th>
                  <th className="py-2">–ë–∞–ª–ª—ã</th>
                  <th className="py-2">–°—Ç–∞—Ç—É—Å</th>
                  <th className="py-2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                </tr>
              </thead>
              <tbody>
                {filtered.map(ev => (
                  <tr key={ev.id} className="border-b">
                    <td className="py-3">{ev.title} <div className="text-xs text-gray-400">{ev.type}</div></td>
                    <td className="py-3">{ev.date}</td>
                    <td className="py-3">{ev.points}</td>
                    <td className="py-3">{ev.status}</td>
                    <td className="py-3">{ev.mandatory}</td>
                  </tr>
                ))}
                {filtered.length===0 && <tr><td colSpan="5" className="py-4 text-center text-gray-400">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</td></tr>}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    );
  }

  // –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ (–±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
  function StudentProfileViewPage({ profile }) {
    const formatDob = () => {
      const dob = profile.dob;
      if (!dob) return "‚Äî";
      try {
        const d = new Date(dob);
        if (!isNaN(d)) {
          const dd = String(d.getDate()).padStart(2, "0");
          const mm = String(d.getMonth() + 1).padStart(2, "0");
          const yyyy = d.getFullYear();
          return `${dd}.${mm}.${yyyy}`;
        }
      } catch {}
      if (typeof dob === "string" && dob.includes(".")) return dob;
      return dob;
    };

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6 max-w-3xl">
          <div className="flex items-center gap-4">
            <div
              className="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold"
              style={{ background: profile.avatarBg }}
            >
              {profile.name.split(" ").map(s => s[0]).slice(0, 2).join("").toUpperCase()}
            </div>
            <div>
              <div className="text-lg font-semibold">{profile.name}</div>
              <div className="text-sm text-gray-500">{profile.group}</div>
              <div className="text-sm text-gray-500">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {formatDob()}</div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  function StudentProfilePage({ profile, setProfile }) {
    const onCertFiles = (e) => {
      const files = e.target.files;
      if (!files?.length) return;
      const arr = Array.from(files).map(f => f.name);
      setProfile(prev => ({
        ...prev,
        uploaded: {
          ...(prev.uploaded ?? {}),
          certs: [ ...(prev.uploaded?.certs ?? []), ...arr ]
        }
      }));
    };

    const onResume = (e) => {
      const files = e.target.files;
      if (!files?.length) return;
      setProfile(prev => ({
        ...prev,
        uploaded: {
          ...(prev.uploaded ?? {}),
          resume: files[0].name
        }
      }));
    };

    const formatDob = () => {
      const dob = profile.dob;
      if (!dob) return "‚Äî";
      try {
        const d = new Date(dob);
        if (!isNaN(d)) {
          const dd = String(d.getDate()).padStart(2, "0");
          const mm = String(d.getMonth() + 1).padStart(2, "0");
          const yyyy = d.getFullYear();
          return `${dd}.${mm}.${yyyy}`;
        }
      } catch {}
      if (typeof dob === "string" && dob.includes(".")) return dob;
      return dob;
    };

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6 max-w-3xl">
          <div className="flex items-center gap-4">
            <div
              className="w-20 h-20 rounded-full flex items-center justify-center text-white font-bold"
              style={{ background: profile.avatarBg }}
            >
              {profile.name.split(" ").map(s => s[0]).slice(0, 2).join("").toUpperCase()}
            </div>
            <div>
              <div className="text-lg font-semibold">{profile.name}</div>
              <div className="text-sm text-gray-500">{profile.group}</div>
              <div className="text-sm text-gray-500">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {formatDob()}</div>
            </div>
          </div>

          <div className="mt-6 space-y-4">
            <div>
              <div className="font-medium">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—é–º–µ</div>
              <input type="file" accept=".pdf,.doc,.docx" onChange={onResume} className="mt-2" />
              <div className="mt-2 text-sm">
                {profile.uploaded?.resume
                  ? <>–ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ä–µ–∑—é–º–µ: <strong>{profile.uploaded.resume}</strong> ‚úÖ</>
                  : <span className="text-gray-400">–†–µ–∑—é–º–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ</span>
                }
              </div>
            </div>

            <div>
              <div className="font-medium">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã</div>
              <input type="file" multiple onChange={onCertFiles} className="mt-2" />
              <div className="mt-3">
                <div className="font-medium">–°–ø–∏—Å–æ–∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤</div>
                <ul className="list-disc ml-6 mt-2">
                  {Array.isArray(profile.uploaded?.certs) && profile.uploaded.certs.length > 0
                    ? profile.uploaded.certs.map((c, i) => (
                        <li key={i} className="text-sm">
                          {c} <span className="text-green-600">‚úÖ</span>
                        </li>
                      ))
                    : <li className="text-sm text-gray-400">–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–µ—Ç</li>
                  }
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  function StudentContactsPage() {
    const contacts = [
      {role: '–†–µ–∫—Ç–æ—Ä', name: '–†–µ–∫—Ç–æ—Ä –ò–≤–∞–Ω–æ–≤', email: 'rector@university.ru'},
      {role: '–ö—É—Ä–∞—Ç–æ—Ä –ø—Ä–∞–∫—Ç–∏–∫–∏', name: '–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è', email: 'curator.practice@university.ru'},
      {role: '–û—Ç–¥–µ–ª –ø–æ–¥–¥–µ—Ä–∂–∫–∏', name: 'Support Team', email: 'support@university.ru'},
      {role: '–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∫—É—Ä—Å–æ–≤', name: '–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π', email: 'courses@university.ru'},
    ];
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h3 className="font-semibold mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h3>
          <ul className="space-y-2">
            {contacts.map((c,i)=>(
              <li key={i} className="text-sm"><strong>{c.role}:</strong> {c.name} ‚Äî <a className="text-indigo-600" href={`mailto:${c.email}`}>{c.email}</a></li>
            ))}
          </ul>
        </div>
      </div>
    );
  }

  function StudentAchievementsPage({ points, onOpenCriterion }) {
    const canvasRef = useRef(null);

    useEffect(() => {
      const labels = CRITERIA_CONFIG.map(c => c.title);
      const data = CRITERIA_CONFIG.map(c => Math.min(points[c.key] || 0, c.max));
      const maxData = CRITERIA_CONFIG.map(c => c.max);

      const ctx = canvasRef.current.getContext('2d');
      let chart;
      try {
        chart = new Chart(ctx, {
          type: 'radar',
          data: {
            labels,
            datasets: [
              {
                label: '–ú–∞–∫—Å–∏–º—É–º',
                data: maxData,
                backgroundColor: 'rgba(255,0,0,0.1)',
                borderColor: 'red',
                pointBackgroundColor: 'red',
                borderWidth: 2,
                pointRadius: 4,
              },
              {
                label: '–¢–µ–∫—É—â–∏–µ –±–∞–ª–ª—ã',
                data,
                backgroundColor: 'rgba(124,58,237,0.15)',
                borderColor: '#7c3aed',
                pointBackgroundColor: '#7c3aed',
                borderWidth: 2,
                pointRadius: 4,
              }
            ]
          },
          options: {
            scales: {
              r: {
                beginAtZero: true,
                suggestedMax: Math.max(...maxData),
                ticks: { stepSize: 50 }
              }
            },
            plugins: {
              legend: { display: true, position: 'bottom' }
            }
          }
        });
      } catch(e) { console.error(e); }
      return () => { if(chart) chart.destroy(); };
    }, [points]);

    const total = Object.values(points).reduce((s,v)=>s+(v||0),0);

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <div className="flex gap-6 items-center">
            <div className="w-1/2">
              <canvas ref={canvasRef} width={420} height={420}></canvas>
            </div>
            <div className="flex-1">
              <div className="text-sm text-gray-500">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤</div>
              <div className="text-5xl font-bold">{total}</div>
              <div className="mt-4 text-sm text-gray-600">
                –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º. –ö—Ä–∞—Å–Ω—ã–π ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–∏–Ω–∏–π ‚Äî –≤–∞—à–∏ —Ç–µ–∫—É—â–∏–µ –±–∞–ª–ª—ã.
              </div>
            </div>
          </div>

          <div className="mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3">
            {CRITERIA_CONFIG.map(c => (
              <button key={c.key} onClick={()=>onOpenCriterion(c)} className="p-3 border rounded text-left hover:bg-gray-50 flex justify-between items-center">
                <div>
                  <div className="font-medium">{c.title}</div>
                  <div className="text-xs text-gray-400">{c.description}</div>
                </div>
                <div className="text-sm font-semibold">{points[c.key] || 0} / {c.max}</div>
              </button>
            ))}
          </div>
        </div>
      </div>
    );
  }

  function CriterionDetail({ criterion, points, onBack }) {
    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6 max-w-4xl mx-auto">
          <div className="flex items-center justify-between">
            <div>
              <div className="text-lg font-semibold">{criterion.title}</div>
              <div className="text-sm text-gray-500">{points} / {criterion.max} –±–∞–ª–ª–æ–≤</div>
            </div>
            <div>
              <button onClick={onBack} className="px-3 py-1 border rounded">–ù–∞–∑–∞–¥</button>
            </div>
          </div>

          <div className="mt-6 text-sm text-gray-700">
            {criterion.key === 'gpa' && (
              <div>
                <div className="font-medium">–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å ‚Äî —Ç–∞–±–ª–∏—Ü–∞ —Å–µ–º–µ—Å—Ç—Ä–æ–≤</div>
                <table className="w-full text-sm mt-3">
                  <thead className="text-xs text-gray-400"><tr><th>–°–µ–º–µ—Å—Ç—Ä</th><th>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</th><th>–ë–∞–ª–ª—ã (i)</th><th>–°–µ—Å—Å–∏—è</th></tr></thead>
                  <tbody>
                    <tr><td>1</td><td>4.2</td><td>126</td><td>–ó–∞–∫—Ä—ã—Ç–∞</td></tr>
                    <tr><td>1 (–î–æ–ø—Å–∞)</td><td>-</td><td>0</td><td>–î–æ–ø—Å–∞</td></tr>
                  </tbody>
                </table>
                <div className="mt-3 text-xs text-gray-500">–ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –∑–∞–∫—Ä—ã—Ç–∞. –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è ¬´–î–æ–ø—Å–∞¬ª ‚Äî –±–∞–ª–ª—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è.</div>
              </div>
            )}

            {criterion.key === 'hard' && (
              <div>
                <div className="font-medium">–•–∞—Ä–¥ –°–∫–∏–ª–ª—ã ‚Äî —Ç–µ—Å—Ç—ã –∏ –Ω–∞–≤—ã–∫–∏</div>
                <table className="w-full text-sm mt-3">
                  <thead className="text-xs text-gray-400"><tr><th>–ù–∞–≤—ã–∫ / –¢–µ—Å—Ç</th><th>–¢–∏–ø</th><th>–ë–∞–ª–ª—ã</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                  <tbody>
                    <tr><td>Python —Ç–µ—Å—Ç</td><td>–¢–µ—Å—Ç</td><td>10</td><td>‚úÖ</td></tr>
                    <tr><td>SQL —Ç–µ—Å—Ç</td><td>–¢–µ—Å—Ç</td><td>10</td><td>‚úÖ</td></tr>
                    <tr><td>Excel –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π</td><td>–ù–∞–≤—ã–∫</td><td>10</td><td>‚ùå</td></tr>
                  </tbody>
                </table>
                <div className="mt-2 text-xs text-gray-500">–ú–∞–∫—Å–∏–º—É–º 20 —Ç–µ—Å—Ç–æ–≤ √ó 10 –±–∞–ª–ª–æ–≤ = 200</div>
              </div>
            )}

            {criterion.key === 'projects' && (
              <div>
                <div className="font-medium">–ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                <table className="w-full text-sm mt-3">
                  <thead className="text-xs text-gray-400"><tr><th>–ü—Ä–æ–µ–∫—Ç</th><th>–î–∞—Ç–∞ —Å–¥–∞—á–∏</th><th>–ë–∞–ª–ª—ã</th><th>–°—Ç–∞—Ç—É—Å</th></tr></thead>
                  <tbody>
                    <tr><td>–ü—Ä–æ–µ–∫—Ç –ø–æ Python</td><td>20.11</td><td>20</td><td>–ü—Ä–∏–Ω—è—Ç</td></tr>
                    <tr><td>–ü—Ä–æ–µ–∫—Ç –ø–æ Data Science</td><td>25.11</td><td>20</td><td>–ù–∞ –ø—Ä–æ–≤–µ—Ä–∫–µ</td></tr>
                  </tbody>
                </table>
                <div className="mt-2 text-xs text-gray-500">–ú–∏–Ω–∏–º—É–º 2 –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ –±–∞–ª–ª–∞ (50)</div>
              </div>
            )}

            {['courses','events','research','intern','recom'].includes(criterion.key) && (
              <div>
                <div className="font-medium">–î–µ—Ç–∞–ª–∏ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—é</div>
                <div className="mt-3 text-sm text-gray-600">{criterion.description}</div>
              </div>
            )}
          </div>
        </div>
      </div>
    );
  }

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —ç–∫—Å–ø–µ—Ä—Ç–∞
  // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å –∫—É—Ä–∞—Ç–æ—Ä–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä, –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —Ñ–æ—Ç–æ)
function CuratorProfilePage({ currentRole }) {
  const [profile, setProfile] = useState({
    name: '',
    email: '',
    phone: '',
    dob: '',
    photo: '',
    university: '',
    position: '',
    direction: ''
  });

  const roleLabels = {
    [ROLES.UNIVERSITY_CURATOR]: '–ö—É—Ä–∞—Ç–æ—Ä –í–£–ó–∞',
    [ROLES.COMPANY_CURATOR]: '–ö—É—Ä–∞—Ç–æ—Ä –∫–æ–º–ø–∞–Ω–∏–∏',
    [ROLES.EXPERT]: '–≠–∫—Å–ø–µ—Ä—Ç',
    [ROLES.CHAIRMAN]: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å'
  };
  
  const profileData = {
    [ROLES.UNIVERSITY_CURATOR]: { 
      name: '–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–Ω–∞', 
      email: 'petrova@university.ru',
      phone: '+7 (911) 123-45-67',
      dob: '1985-03-15',
      university: '–°–ü–ë–ü–£',
      position: '–°—Ç–∞—Ä—à–∏–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å',
      direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑'
    },
    [ROLES.COMPANY_CURATOR]: { 
      name: '–°–∏–¥–æ—Ä–æ–≤ –ê–ª–µ–∫—Å–µ–π –ü–µ—Ç—Ä–æ–≤–∏—á', 
      email: 'sidorov@gazprom-neft.ru',
      phone: '+7 (912) 234-56-78',
      dob: '1978-07-22',
      university: '',
      position: '–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–∞–∫—Ç–∏–∫–∏',
      direction: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã'
    },
    [ROLES.EXPERT]: { 
      name: '–ö–æ–∑–ª–æ–≤–∞ –ê–Ω–Ω–∞ –°–µ—Ä–≥–µ–µ–≤–Ω–∞', 
      email: 'kozlova@expert.ru',
      phone: '+7 (913) 345-67-89',
      dob: '1982-11-30',
      university: '',
      position: '–≠–∫—Å–ø–µ—Ä—Ç –ø–æ –ò–¢',
      direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è'
    },
    [ROLES.CHAIRMAN]: { 
      name: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á', 
      email: 'ivanov@committee.ru',
      phone: '+7 (914) 456-78-90',
      dob: '1975-05-18',
      university: '',
      position: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å –∫–æ–º–∏—Å—Å–∏–∏',
      direction: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞'
    }
  };

  useEffect(() => {
    const data = profileData[currentRole] || { 
      name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å', 
      email: '',
      phone: '',
      dob: '',
      university: '',
      position: '',
      direction: ''
    };
    setProfile(data);
  }, [currentRole]);

  const handlePhotoChange = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        setProfile({...profile, photo: e.target.result});
      };
      reader.readAsDataURL(file);
    }
  };

  const handlePhoneChange = (newPhone) => {
    setProfile({...profile, phone: newPhone});
  };

  const handleSave = () => {
    alert('–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (—ç–º—É–ª—è—Ü–∏—è)');
  };

  const formatDate = (dateString) => {
    if (!dateString) return '‚Äî';
    const date = new Date(dateString);
    return date.toLocaleDateString('ru-RU');
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6 max-w-3xl">
        <h2 className="text-2xl font-bold mb-6">–ü—Ä–æ—Ñ–∏–ª—å {roleLabels[currentRole]}</h2>
        
        <div className="flex items-start gap-6">
          {/* –ë–ª–æ–∫ —Å —Ñ–æ—Ç–æ */}
          <div className="flex flex-col items-center">
            <div className="w-32 h-32 rounded-full bg-indigo-100 flex items-center justify-center text-4xl mb-4 overflow-hidden">
              {profile.photo ? (
                <img src={profile.photo} alt="–§–æ—Ç–æ" className="w-full h-full object-cover" />
              ) : (
                <span>üë§</span>
              )}
            </div>
            <input
              type="file"
              accept="image/*"
              onChange={handlePhotoChange}
              className="hidden"
              id="photo-upload"
            />
            <label 
              htmlFor="photo-upload" 
              className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 cursor-pointer text-sm"
            >
              –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ
            </label>
          </div>
          
          {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ */}
          <div className="flex-1 space-y-4">
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–§–ò–û</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.name}
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.email}
                </div>
              </div>
            </div>
            
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input
                  type="tel"
                  value={profile.phone}
                  onChange={(e) => handlePhoneChange(e.target.value)}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="+7 (XXX) XXX-XX-XX"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {formatDate(profile.dob)}
                </div>
              </div>
            </div>
            
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.position}
                </div>
              </div>
              {currentRole === ROLES.UNIVERSITY_CURATOR && (
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-1">–í–£–ó</label>
                  <div className="w-full px-3 py-2 border rounded bg-gray-50">
                    {profile.university}
                  </div>
                </div>
              )}
            </div>

            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
              <div className="w-full px-3 py-2 border rounded bg-gray-50">
                {profile.direction}
              </div>
            </div>
            
            <div className="pt-4 border-t">
              <button 
                onClick={handleSave}
                className="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700"
              >
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
              </button>
              <div className="text-xs text-gray-500 mt-2">
                * –ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
} 

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–æ–≤ (–¥–ª—è –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è –∏ —ç–∫—Å–ø–µ—Ä—Ç–∞)
  function HardSkillsPage() {
    const directions = [
      {
        name: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑',
        skills: [
          { name: 'Python', weight: 15 },
          { name: 'SQL', weight: 20 },
          { name: 'Excel', weight: 10 },
          { name: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö', weight: 25 },
          { name: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞', weight: 15 },
          { name: '–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ', weight: 15 }
        ]
      },
      {
        name: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
        skills: [
          { name: 'Java', weight: 20 },
          { name: 'SQL', weight: 15 },
          { name: '–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö', weight: 20 },
          { name: '–°–∏—Å—Ç–µ–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑', weight: 15 },
          { name: '–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', weight: 20 },
          { name: '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ', weight: 10 }
        ]
      },
      {
        name: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è',
        skills: [
          { name: 'Python', weight: 15 },
          { name: 'Java', weight: 15 },
          { name: '–ê–ª–≥–æ—Ä–∏—Ç–º—ã', weight: 20 },
          { name: '–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö', weight: 15 },
          { name: '–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ü–û', weight: 20 },
          { name: 'DevOps', weight: 15 }
        ]
      },
      {
        name: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞',
        skills: [
          { name: 'Python', weight: 15 },
          { name: 'SQL', weight: 15 },
          { name: '–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑', weight: 25 },
          { name: '–ü—Ä–æ—Ü–µ—Å—Å—ã', weight: 15 },
          { name: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏', weight: 20 },
          { name: 'ERP —Å–∏—Å—Ç–µ–º—ã', weight: 10 }
        ]
      }
    ];

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–•–∞—Ä–¥ —Å–∫–∏–ª–ª—ã –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º</h2>
          
          <div className="space-y-6">
            {directions.map((direction, idx) => (
              <div key={idx} className="border rounded-lg p-4">
                <h3 className="text-lg font-semibold mb-3">{direction.name}</h3>
                <div className="space-y-2">
                  {direction.skills.map((skill, skillIdx) => (
                    <div key={skillIdx} className="flex items-center justify-between p-2 bg-gray-50 rounded">
                      <span className="font-medium">{skill.name}</span>
                      <span className="text-sm text-gray-600">–í–µ—Å: {skill.weight}%</span>
                    </div>
                  ))}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    );
  }

  // –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤ (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è)
  function ReportsPage({ currentRole, onViewStudentProfile }) {
    const [searchQuery, setSearchQuery] = useState('');
    const [filterDirection, setFilterDirection] = useState('all');

    const filteredStudents = DEMO_DATA.students.filter(student => {
      const matchesSearch = student.name.toLowerCase().includes(searchQuery.toLowerCase());
      const matchesDirection = filterDirection === 'all' || student.direction.includes(filterDirection);
      return matchesSearch && matchesDirection;
    });

    return (
      <div className="p-6">
        <div className="bg-white card-shadow rounded-lg p-6">
          <h2 className="text-xl font-bold mb-4">–û—Ç—á–µ—Ç—ã</h2>
          
          <div className="mb-4 flex flex-wrap gap-2">
            <input 
              type="text" 
              placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û..." 
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
              className="px-3 py-2 border rounded text-sm"
            />
            <select 
              value={filterDirection}
              onChange={(e) => setFilterDirection(e.target.value)}
              className="px-3 py-2 border rounded text-sm"
            >
              <option value="all">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
              <option value="–≠–∫–æ–Ω–æ–º–∏–∫–∞">–≠–∫–æ–Ω–æ–º–∏–∫–∞</option>
              <option value="–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è">–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è</option>
              <option value="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</option>
              <option value="–ë–∏–∑–Ω–µ—Å">–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞</option>
            </select>
          </div>
          
          <div className="overflow-x-auto">
            <table className="w-full text-sm text-left">
              <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th className="px-4 py-3">–§–ò–û</th>
                  <th className="px-4 py-3">–í–£–ó</th>
                  <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                  <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                  <th className="px-4 py-3">ML-–ø—Ä–æ–≥–Ω–æ–∑</th>
                  <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
              </thead>
              <tbody>
                {filteredStudents.map(student => (
                  <tr key={student.id} className="bg-white border-b">
                    <td className="px-4 py-3 font-medium">{student.name}</td>
                    <td className="px-4 py-3">{student.university}</td>
                    <td className="px-4 py-3">{student.direction}</td>
                    <td className="px-4 py-3">{student.points}</td>
                    <td className="px-4 py-3">{student.successPercent}%</td>
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => onViewStudentProfile && onViewStudentProfile(student)}
                        className="text-indigo-600 hover:text-indigo-900 font-medium"
                      >
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                      </button>
                    </td>
                  </tr>
                ))}
                {filteredStudents.length === 0 && (
                  <tr>
                    <td colSpan="6" className="px-4 py-3 text-center text-gray-500">
                      –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
                    </td>
                  </tr>
                )}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    );
  }

  /* ------------------ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ------------------ */

  function App() {
  const [currentRole, setCurrentRole] = useLocalState('st_role', ROLES.STUDENT);
  const [collapsed, setCollapsed] = useLocalState('st_collapsed', false);
  const [active, setActive] = useLocalState('st_active', 'home');
  const [values, setValues] = useLocalState('st_values', DEFAULT_STUDENT_STATE);
  
  // –ü–æ–ª—É—á–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–æ–ª–∏
  const getProfileForRole = (role) => {
    const roleProfile = ROLE_PROFILES[role] || ROLE_PROFILES[ROLES.STUDENT];
    
    // –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    if (role === ROLES.STUDENT) {
      return {
        ...roleProfile,
        dob: DEFAULT_STUDENT_STATE.dob,
        uploaded: DEFAULT_STUDENT_STATE.uploaded,
        activity: DEFAULT_STUDENT_STATE.activity
      };
    }
    
    // –î–ª—è –¥—Ä—É–≥–∏—Ö —Ä–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–∞–∑–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
    return roleProfile;
  };

  const [profile, setProfile] = useState(() => getProfileForRole(currentRole));

  const { points, total } = computePoints(values);

  const [notifOpen, setNotifOpen] = useState(false);
  const [supportOpen, setSupportOpen] = useState(false);
  const [selectedCriterion, setSelectedCriterion] = useState(null);
  const [viewingStudent, setViewingStudent] = useState(null);
  const [viewingStudentAchievements, setViewingStudentAchievements] = useState(false);
  const [evaluateModalOpen, setEvaluateModalOpen] = useState(false);
  const [evaluatingStudent, setEvaluatingStudent] = useState(null);
  const [skillScores, setSkillScores] = useState({});
  const [practiceModalOpen, setPracticeModalOpen] = useState(false);
  const [practiceForm, setPracticeForm] = useState({ score: '', review: '' });

  // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ä–æ–ª–∏
  useEffect(() => {
    setProfile(getProfileForRole(currentRole));
  }, [currentRole]);

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞)
  function openAchievements() {
    setActive('achievements');
    setSelectedCriterion(null);
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –í–£–ó–∞
  const handleNavigateToStudents = () => {
    setActive('students');
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è –∏ —ç–∫—Å–ø–µ—Ä—Ç–∞
  const handleNavigateToReports = () => {
    setActive('reports');
  };

  const handleNavigateToUsers = () => {
    setActive('users');
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏
  const handleViewStudentAchievements = (student) => {
    setViewingStudent(student);
    setViewingStudentAchievements(true);
    setActive('student-achievements');
  };

  const handleViewStudentProfile = (student) => {
    setViewingStudent(student);
    setViewingStudentAchievements(false);
    setActive('student-profile');
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–º
  const handleEvaluateStudent = (student) => {
    setEvaluatingStudent(student);
    setSkillScores({
      'Python': 0,
      'SQL': 0,
      'Java': 0,
      '–ê–ª–≥–æ—Ä–∏—Ç–º—ã': 0,
      '–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö': 0,
      '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö': 0
    });
    setEvaluateModalOpen(true);
  };

  const handleSubmitEvaluation = () => {
    if (evaluatingStudent) {
      const totalScore = Object.values(skillScores).reduce((sum, score) => sum + (parseInt(score) || 0), 0);
      alert(`–û—Ü–µ–Ω–∫–∞ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ "${evaluatingStudent.name}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –û–±—â–∏–π –±–∞–ª–ª: ${totalScore} (—ç–º—É–ª—è—Ü–∏—è)`);
      setEvaluateModalOpen(false);
      setEvaluatingStudent(null);
      setSkillScores({});
    }
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫—É—Ä–∞—Ç–æ—Ä–æ–º –∫–æ–º–ø–∞–Ω–∏–∏
  const handleEvaluatePractice = (student) => {
    setEvaluatingStudent(student);
    setPracticeForm({ score: '', review: '' });
    setPracticeModalOpen(true);
  };

  const handleSubmitPractice = () => {
    if (evaluatingStudent && practiceForm.score && practiceForm.review) {
      alert(`–û—Ü–µ–Ω–∫–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ "${evaluatingStudent.name}" –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –ë–∞–ª–ª—ã: ${practiceForm.score}/10 (—ç–º—É–ª—è—Ü–∏—è)`);
      setPracticeModalOpen(false);
      setEvaluatingStudent(null);
      setPracticeForm({ score: '', review: '' });
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è: –±–∞–ª–ª—ã –∏ –æ—Ç–∑—ã–≤');
    }
  };

  // –û–±—ë—Ä—Ç–∫–∞ –¥–ª—è setActive, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫–∂–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç selectedCriterion
  const handleSetActive = (key) => {
    setActive(key);
    setSelectedCriterion(null);
  };

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏
  const handleRoleChange = (role) => {
    setCurrentRole(role);
    setActive('home');
    setSelectedCriterion(null);
    // –ü—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ useEffect
  };

  // –û—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ App –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π...
  // [–æ—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø—Ä–µ–∂–Ω–µ–π]
    // –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
// –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è (–±—ã–≤—à–∏–π ExpertRatingPage)
function ChairmanApprovalPage({ currentRole }) {
  const [students, setStudents] = useState(DEMO_DATA.students);
  const [approvalRequests, setApprovalRequests] = useState([
    { id: 1, student: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', type: '–ö—É—Ä—Å', title: 'Python Advanced', points: 20, status: '–æ–∂–∏–¥–∞–µ—Ç', expert: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.' },
    { id: 2, student: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', type: '–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ', title: '–•–∞–∫–∞—Ç–æ–Ω DataCup', points: 20, status: '–æ–∂–∏–¥–∞–µ—Ç', expert: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.' }
  ]);

  const handleApproveAll = () => {
    setApprovalRequests(requests => 
      requests.map(req => ({ ...req, status: '—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ' }))
    );
    alert('–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã!');
  };

  const handleApproveOne = (requestId) => {
    setApprovalRequests(requests =>
      requests.map(req => 
        req.id === requestId ? { ...req, status: '—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ' } : req
      )
    );
    alert('–ò–∑–º–µ–Ω–µ–Ω–∏–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ!');
  };

  const handleRejectOne = (requestId) => {
    setApprovalRequests(requests =>
      requests.map(req => 
        req.id === requestId ? { ...req, status: '–æ—Ç–∫–ª–æ–Ω–µ–Ω–æ' } : req
      )
    );
    alert('–ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ!');
  };

  return (
    <div className="p-6 space-y-6">
      {/* –ë–ª–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π */}
      {approvalRequests.filter(req => req.status === '–æ–∂–∏–¥–∞–µ—Ç').length > 0 && (
        <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
          <div className="flex justify-between items-center">
            <div>
              <h3 className="font-semibold text-yellow-800">–ó–∞–ø—Ä–æ—Å—ã –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ</h3>
              <p className="text-yellow-600 text-sm">
                {approvalRequests.filter(req => req.status === '–æ–∂–∏–¥–∞–µ—Ç').length} –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ–∂–∏–¥–∞—é—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
              </p>
            </div>
            <div className="flex gap-2">
              <button 
                onClick={handleApproveAll}
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
              >
                –£—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—Å–µ
              </button>
            </div>
          </div>
        </div>
      )}

      {/* –¢–∞–±–ª–∏—Ü–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ */}
      <div className="bg-white card-shadow rounded-lg p-6">
        <h2 className="text-xl font-bold mb-4">–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</h2>
        
        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–°—Ç—É–¥–µ–Ω—Ç</th>
                <th className="px-4 py-3">–¢–∏–ø</th>
                <th className="px-4 py-3">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th className="px-4 py-3">–ë–∞–ª–ª—ã</th>
                <th className="px-4 py-3">–≠–∫—Å–ø–µ—Ä—Ç</th>
                <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody>
              {approvalRequests.map(request => (
                <tr key={request.id} className="bg-white border-b">
                  <td className="px-4 py-3 font-medium">{request.student}</td>
                  <td className="px-4 py-3">{request.type}</td>
                  <td className="px-4 py-3">{request.title}</td>
                  <td className="px-4 py-3">{request.points}</td>
                  <td className="px-4 py-3">{request.expert}</td>
                  <td className="px-4 py-3">
                    <span className={`px-2 py-1 rounded text-xs ${
                      request.status === '–æ–∂–∏–¥–∞–µ—Ç' ? 'bg-yellow-100 text-yellow-800' :
                      request.status === '—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ' ? 'bg-green-100 text-green-800' :
                      'bg-red-100 text-red-800'
                    }`}>
                      {request.status}
                    </span>
                  </td>
                  <td className="px-4 py-3">
                    {request.status === '–æ–∂–∏–¥–∞–µ—Ç' && (
                      <div className="flex gap-2">
                        <button 
                          onClick={() => handleApproveOne(request.id)}
                          className="px-3 py-1 bg-green-600 text-white rounded text-sm"
                        >
                          –£—Ç–≤–µ—Ä–¥–∏—Ç—å
                        </button>
                        <button 
                          onClick={() => handleRejectOne(request.id)}
                          className="px-3 py-1 bg-red-600 text-white rounded text-sm"
                        >
                          –û—Ç–∫–ª–æ–Ω–∏—Ç—å
                        </button>
                      </div>
                    )}
                  </td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  );
}

// –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–æ–≤ –¥–ª—è —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
function ExpertHardSkillsPage({ currentRole }) {
  const [skills, setSkills] = useState([
    { id: 1, name: 'Python', direction: '–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è', weight: 15, status: '–∞–∫—Ç–∏–≤–µ–Ω' },
    { id: 2, name: 'SQL', direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢', weight: 20, status: '–∞–∫—Ç–∏–≤–µ–Ω' },
    { id: 3, name: 'Java', direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', weight: 15, status: '–∞–∫—Ç–∏–≤–µ–Ω' },
  ]);
  const [addModalOpen, setAddModalOpen] = useState(false);
  const [editMode, setEditMode] = useState(false);
  const [skillForm, setSkillForm] = useState({ name: '', direction: '', weight: '', status: '–∞–∫—Ç–∏–≤–µ–Ω' });

  const directions = ['–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è', '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢', '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞'];

  const handleAddSkill = () => {
    if (skillForm.name && skillForm.direction && skillForm.weight) {
      const newSkill = {
        id: skills.length + 1,
        ...skillForm,
        weight: parseInt(skillForm.weight)
      };
      setSkills([...skills, newSkill]);
      setSkillForm({ name: '', direction: '', weight: '', status: '–∞–∫—Ç–∏–≤–µ–Ω' });
      setAddModalOpen(false);
      alert(`–•–∞—Ä–¥ —Å–∫–∏–ª–ª "${skillForm.name}" –¥–æ–±–∞–≤–ª–µ–Ω`);
    } else {
      alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è');
    }
  };

  const handleDeleteSkill = (skillId) => {
    if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª?')) {
      setSkills(skills.filter(skill => skill.id !== skillId));
      alert('–•–∞—Ä–¥ —Å–∫–∏–ª–ª —É–¥–∞–ª–µ–Ω');
    }
  };

  const handleFieldEdit = (skillId, field, value) => {
    if (editMode) {
      setSkills(skills.map(skill => 
        skill.id === skillId ? { ...skill, [field]: value } : skill
      ));
    }
  };

  const handleExportExcel = () => {
    alert('–î–∞–Ω–Ω—ã–µ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–æ–≤ –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ Excel (—ç–º—É–ª—è—Ü–∏—è)');
  };

  const handleImportExcel = () => {
    alert('–ó–∞–≥—Ä—É–∑–∏—Ç–µ Excel —Ñ–∞–π–ª –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–æ–≤ (—ç–º—É–ª—è—Ü–∏—è)');
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        <div className="flex justify-between items-center mb-4">
          <h2 className="text-xl font-bold">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –•–∞—Ä–¥ –°–∫–∏–ª–ª–∞–º–∏</h2>
          <div className="flex gap-2">
            {/* –ö–Ω–æ–ø–∫–∏ Excel */}
            <button 
              onClick={handleExportExcel} 
              className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2 tt"
              data-tip="–í—ã–≥—Ä—É–∑–∏—Ç—å –≤ Excel"
            >
              <span>‚¨ÜÔ∏è</span> Excel
            </button>
            <button 
              onClick={handleImportExcel} 
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 tt"
              data-tip="–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ Excel"
            >
              <span>‚¨áÔ∏è</span> Excel
            </button>
            
            {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è */}
            <button 
              onClick={() => setEditMode(!editMode)}
              className={`px-4 py-2 rounded flex items-center gap-2 ${
                editMode ? 'bg-red-600 text-white' : 'bg-gray-600 text-white'
              }`}
            >
              <span>{editMode ? '‚úÖ' : '‚úèÔ∏è'}</span>
              {editMode ? '–†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è' : '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å'}
            </button>

            <button 
              onClick={() => setAddModalOpen(true)}
              className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 flex items-center gap-2"
            >
              <span>+</span> –î–æ–±–∞–≤–∏—Ç—å —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª
            </button>
          </div>
        </div>

        <div className="overflow-x-auto">
          <table className="w-full text-sm text-left">
            <thead className="text-xs text-gray-700 uppercase bg-gray-50">
              <tr>
                <th className="px-4 py-3">–•–∞—Ä–¥ –°–∫–∏–ª–ª</th>
                <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                <th className="px-4 py-3">–í–µ—Å (%)</th>
                <th className="px-4 py-3">–°—Ç–∞—Ç—É—Å</th>
                {editMode && <th className="px-4 py-3">–î–µ–π—Å—Ç–≤–∏—è</th>}
              </tr>
            </thead>
            <tbody>
              {skills.map(skill => (
                <tr key={skill.id} className="bg-white border-b hover:bg-gray-50">
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="text"
                        value={skill.name}
                        onChange={(e) => handleFieldEdit(skill.id, 'name', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span className="font-medium">{skill.name}</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={skill.direction}
                        onChange={(e) => handleFieldEdit(skill.id, 'direction', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        {directions.map(dir => (
                          <option key={dir} value={dir}>{dir}</option>
                        ))}
                      </select>
                    ) : (
                      skill.direction
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <input
                        type="number"
                        min="1"
                        max="100"
                        value={skill.weight}
                        onChange={(e) => handleFieldEdit(skill.id, 'weight', parseInt(e.target.value))}
                        className="w-full px-2 py-1 border rounded"
                      />
                    ) : (
                      <span>{skill.weight}%</span>
                    )}
                  </td>
                  <td className="px-4 py-3">
                    {editMode ? (
                      <select
                        value={skill.status}
                        onChange={(e) => handleFieldEdit(skill.id, 'status', e.target.value)}
                        className="w-full px-2 py-1 border rounded"
                      >
                        <option value="–∞–∫—Ç–∏–≤–µ–Ω">–ê–∫—Ç–∏–≤–µ–Ω</option>
                        <option value="–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</option>
                      </select>
                    ) : (
                      <span className={`px-2 py-1 rounded text-xs ${
                        skill.status === '–∞–∫—Ç–∏–≤–µ–Ω' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'
                      }`}>
                        {skill.status}
                      </span>
                    )}
                  </td>
                  {editMode && (
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => handleDeleteSkill(skill.id)}
                        className="text-red-600 hover:text-red-900 font-medium text-lg"
                        title="–£–¥–∞–ª–∏—Ç—å —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª"
                      >
                        ‚ùå
                      </button>
                    </td>
                  )}
                </tr>
              ))}
            </tbody>
          </table>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞ */}
      {addModalOpen && (
        <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-md">
            <div className="flex items-center justify-between mb-4">
              <h3 className="text-lg font-semibold">–î–æ–±–∞–≤–∏—Ç—å —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª</h3>
              <button onClick={() => setAddModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
            </div>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞ *</label>
                <input
                  type="text"
                  value={skillForm.name}
                  onChange={(e) => setSkillForm({...skillForm, name: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ *</label>
                <select
                  value={skillForm.direction}
                  onChange={(e) => setSkillForm({...skillForm, direction: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ --</option>
                  {directions.map(dir => (
                    <option key={dir} value={dir}>{dir}</option>
                  ))}
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–í–µ—Å (%) *</label>
                <input
                  type="number"
                  min="1"
                  max="100"
                  value={skillForm.weight}
                  onChange={(e) => setSkillForm({...skillForm, weight: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                  placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å –æ—Ç 1 –¥–æ 100"
                />
              </div>
              <div>
                <label className="block text-sm font-medium mb-1">–°—Ç–∞—Ç—É—Å</label>
                <select
                  value={skillForm.status}
                  onChange={(e) => setSkillForm({...skillForm, status: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                >
                  <option value="–∞–∫—Ç–∏–≤–µ–Ω">–ê–∫—Ç–∏–≤–µ–Ω</option>
                  <option value="–Ω–µ–∞–∫—Ç–∏–≤–µ–Ω">–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</option>
                </select>
              </div>
              <div className="flex justify-end gap-2">
                <button onClick={() => setAddModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                  –û—Ç–º–µ–Ω–∞
                </button>
                <button onClick={handleAddSkill} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                  –î–æ–±–∞–≤–∏—Ç—å
                </button>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
    // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
  function renderActivePage() {
  // –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
  if (currentRole === ROLES.STUDENT) {
    if (active === 'achievements' && !selectedCriterion) {
      return <StudentAchievementsPage points={points} onOpenCriterion={(c)=>setSelectedCriterion(c)} />;
    }
    if (active === 'achievements' && selectedCriterion) {
      return <CriterionDetail criterion={selectedCriterion} points={points[selectedCriterion.key] || 0} onBack={()=>setSelectedCriterion(null)} />;
    }
    if (active === 'courses') {
      return <StudentCoursesPage />;
    }
    if (active === 'hard') {
      return <StudentHardSkillsPage />;
    }
    if (active === 'events') {
      return <StudentEventsPage />;
    }
    if (active === 'profile') {
      return <StudentProfilePage profile={profile} setProfile={setProfile} />;
    }
    if (active === 'contacts') {
      return <StudentContactsPage />;
    }
    if (active === 'support') {
      return <SupportPage onOpenSupportModal={() => setSupportOpen(true)} />;
    }
  }

  // –°—Ç—Ä–∞–Ω–∏—Ü—ã —ç–∫—Å–ø–µ—Ä—Ç–∞ –∏ –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è
    if (currentRole === ROLES.CHAIRMAN || currentRole === ROLES.EXPERT) {
  if (active === 'rating') return <ChairmanRatingPage currentRole={currentRole} />;
  if (active === 'report' && currentRole === ROLES.CHAIRMAN) return <ChairmanApprovalPage currentRole={currentRole} />;
  if (active === 'courses') return <ExpertCoursesPage currentRole={currentRole} />;
  if (active === 'events') return <ExpertEventsPage currentRole={currentRole} />;
  if (active === 'hardskills') return <ExpertHardSkillsPage currentRole={currentRole} />;
  if (active === 'profile') return <ExpertProfilePage currentRole={currentRole} />;
  if (active === 'support') return <SupportPage onOpenSupportModal={() => setSupportOpen(true)} />;
  if (active === 'users' && currentRole === ROLES.CHAIRMAN) return <UsersPage />;
  
  return <ExpertHome currentRole={currentRole} />;
}

  // –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å—Ç—É–¥–µ–Ω—Ç–∞ (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–∞ –∫–æ–º–ø–∞–Ω–∏–∏)
  if (active === 'student-achievements' && viewingStudent) {
    const studentPoints = { gpa: 126, courses: 60, events: 20, projects: 20, research: 0, hard: 60, intern: 25, recom: 25 };
    return (
      <div>
        <button onClick={() => { setActive('home'); setViewingStudent(null); }} className="mb-4 px-4 py-2 border rounded">
          ‚Üê –ù–∞–∑–∞–¥
        </button>
        <StudentAchievementsPage points={studentPoints} onOpenCriterion={(c)=>setSelectedCriterion(c)} />
      </div>
    );
  }

  // –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ—Ñ–∏–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞ (–¥–ª—è –∫—É—Ä–∞—Ç–æ—Ä–æ–≤)
  if (active === 'student-profile' && viewingStudent) {
    const studentProfile = {
      name: viewingStudent.name,
      group: `${viewingStudent.university} - ${viewingStudent.direction}`,
      avatarBg: '#60a5fa',
      dob: '2000-01-01',
      uploaded: { resume: null, certs: [] },
      activity: []
    };
    return (
      <div>
        <button onClick={() => { setActive('home'); setViewingStudent(null); }} className="mb-4 px-4 py-2 border rounded">
          ‚Üê –ù–∞–∑–∞–¥
        </button>
        <StudentProfileViewPage profile={studentProfile} />
      </div>
    );
  }

  // –û–±—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–æ–ª–µ–π
  if (active === 'students' && 
      (currentRole === ROLES.UNIVERSITY_CURATOR || 
       currentRole === ROLES.COMPANY_CURATOR || 
       currentRole === ROLES.CHAIRMAN ||
       currentRole === ROLES.EXPERT)) {
    return <StudentsPage 
      currentRole={currentRole} 
      onViewStudentProfile={handleViewStudentProfile} 
      onViewStudentAchievements={handleViewStudentAchievements}
      onEvaluateStudent={handleEvaluateStudent}
      onEvaluatePractice={handleEvaluatePractice}
    />;
  }

  if (active === 'hardskills' && 
      (currentRole === ROLES.CHAIRMAN || 
       currentRole === ROLES.EXPERT)) {
    return <HardSkillsPage />;
  }
  
  if (active === 'events' && 
      (currentRole === ROLES.UNIVERSITY_CURATOR || 
       currentRole === ROLES.COMPANY_CURATOR)) {
    return <EventsPage currentRole={currentRole} />;
  }
  
  if (active === 'users' && 
      (currentRole === ROLES.CHAIRMAN || 
       currentRole === ROLES.ADMIN ||
       currentRole === ROLES.EXPERT)) {
    return <UsersPage />;
  }

  if (active === 'profile' && 
      (currentRole === ROLES.UNIVERSITY_CURATOR || 
       currentRole === ROLES.COMPANY_CURATOR ||
       currentRole === ROLES.EXPERT ||
       currentRole === ROLES.CHAIRMAN)) {
    return <CuratorProfilePage currentRole={currentRole} />;
  }
  
  if (active === 'support') {
    return <SupportPage onOpenSupportModal={() => setSupportOpen(true)} />;
  }
  
  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —Ä–æ–ª–µ–π
  switch(currentRole) {
    case ROLES.UNIVERSITY_CURATOR:
      if (active === 'applications') return <ApplicationsPage />;
      break;
    case ROLES.ADMIN:
      //if (active === 'documents') return <DocumentsPage />;
      break;
    default:
      break;
  }
  
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π —Ä–æ–ª–∏
  return (
    <HomePage 
      currentRole={currentRole} 
      totalPoints={total} 
      profile={profile} 
      openAchievements={openAchievements}
      onNavigateToStudents={handleNavigateToStudents}
      onNavigateToReports={handleNavigateToReports}
      onNavigateToUsers={handleNavigateToUsers}
      onViewStudentAchievements={handleViewStudentAchievements}
      onViewStudentProfile={handleViewStudentProfile}
    />
  );
}
// –ù–∞—Å—Ç–æ—è—â–∏–π —Ä–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è
function ChairmanRatingPage({ currentRole }) {
    const isChairman = currentRole === ROLES.CHAIRMAN;
    const isExpert = currentRole === ROLES.EXPERT;

  const [activeTab, setActiveTab] = useState('students');
  const [students, setStudents] = useState([
    { 
      id: 1, 
      name: '–ò–≤–∞–Ω–æ–≤ –ò.–ò.', 
      direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑', 
      points: 720, 
      level: 6, 
      gpa: 4.5,
      practice: 25,
      recommendations: 25,
      finalRating: 720
    },
    { 
      id: 2, 
      name: '–ü–µ—Ç—Ä–æ–≤ –ü.–ü.', 
      direction: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', 
      points: 650, 
      level: 5, 
      gpa: 4.2,
      practice: 18,
      recommendations: 0,
      finalRating: 650
    },
    { 
      id: 3, 
      name: '–°–∏–¥–æ—Ä–æ–≤–∞ –°.–°.', 
      direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è', 
      points: 820, 
      level: 7, 
      gpa: 4.8,
      practice: 25,
      recommendations: 25,
      finalRating: 820
    }
  ]);

  const [applicants, setApplicants] = useState([
    {
      id: 1,
      name: '–°–º–∏—Ä–Ω–æ–≤ –ê.–ê.',
      direction: '–ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–∏—è',
      portfolio: '–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ_–°–º–∏—Ä–Ω–æ–≤.pdf',
      resume: '–†–µ–∑—é–º–µ_–°–º–∏—Ä–Ω–æ–≤.pdf',
      points: 285,
      originalDocs: true
    },
    {
      id: 2,
      name: '–ö–æ–∑–ª–æ–≤–∞ –ï.–í.',
      direction: '–ë–∏–∑–Ω–µ—Å-–∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞',
      portfolio: null,
      resume: null,
      points: 185,
      originalDocs: false
    }
  ]);

  const [searchQuery, setSearchQuery] = useState('');
  const [filterDirection, setFilterDirection] = useState('all');
  const [smartFilters, setSmartFilters] = useState([]);
  const [showSmartFilter, setShowSmartFilter] = useState(false);
  const [newFilter, setNewFilter] = useState({ criterion: '', operator: '>=', value: '' });

  const criteriaOptions = [
    { value: 'gpa', label: '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å', type: 'number', max: 5 },
    { value: 'practice', label: '–ü—Ä–∞–∫—Ç–∏–∫–∞/—Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏', type: 'number', max: 100 },
    { value: 'recommendations', label: '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', type: 'number', max: 50 },
    { value: 'finalRating', label: '–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤', type: 'number', max: 1000 },
    { value: 'level', label: '–£—Ä–æ–≤–µ–Ω—å', type: 'number', max: 7 }
  ];

  const operatorOptions = [
    { value: '>=', label: '‚â•' },
    { value: '<=', label: '‚â§' },
    { value: '=', label: '=' },
    { value: '>', label: '>' },
    { value: '<', label: '<' }
  ];

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
  const filteredAndSortedStudents = students
    .filter(student => {
      const matchesSearch = student.name.toLowerCase().includes(searchQuery.toLowerCase());
      const matchesDirection = filterDirection === 'all' || student.direction === filterDirection;
      
      // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–º–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤
      const matchesSmartFilters = smartFilters.every(filter => {
        const studentValue = student[filter.criterion];
        const filterValue = parseFloat(filter.value);
        
        switch(filter.operator) {
          case '>=': return studentValue >= filterValue;
          case '<=': return studentValue <= filterValue;
          case '=': return studentValue === filterValue;
          case '>': return studentValue > filterValue;
          case '<': return studentValue < filterValue;
          default: return true;
        }
      });
      
      return matchesSearch && matchesDirection && matchesSmartFilters;
    })
    .sort((a, b) => b.finalRating - a.finalRating);

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤
  const filteredAndSortedApplicants = applicants
    .filter(applicant => {
      const matchesSearch = applicant.name.toLowerCase().includes(searchQuery.toLowerCase());
      const matchesDirection = filterDirection === 'all' || applicant.direction === filterDirection;
      return matchesSearch && matchesDirection;
    })
    .sort((a, b) => b.points - a.points);

  const handleAddSmartFilter = () => {
    if (newFilter.criterion && newFilter.value !== '') {
      setSmartFilters([...smartFilters, { ...newFilter }]);
      setNewFilter({ criterion: '', operator: '>=', value: '' });
      setShowSmartFilter(false);
    }
  };

  const handleRemoveSmartFilter = (index) => {
    setSmartFilters(smartFilters.filter((_, i) => i !== index));
  };

  const handleMLAnalysis = () => {
    alert('–ó–∞–ø—É—â–µ–Ω ML –∞–Ω–∞–ª–∏–∑ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤... (—ç–º—É–ª—è—Ü–∏—è)');
  };

  const handleExportExcel = () => {
    alert(`–î–∞–Ω–Ω—ã–µ ${activeTab === 'students' ? '—Å—Ç—É–¥–µ–Ω—Ç–æ–≤' : '–∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤'} –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ Excel (—ç–º—É–ª—è—Ü–∏—è)`);
  };

  const handleViewProfile = (student) => {
    alert(`–ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞: ${student.name} (—ç–º—É–ª—è—Ü–∏—è)`);
  };

  const getLevelColor = (level) => {
    const colors = {
      1: 'bg-gray-100 text-gray-800',
      2: 'bg-gray-200 text-gray-800', 
      3: 'bg-yellow-100 text-yellow-800',
      4: 'bg-blue-100 text-blue-800',
      5: 'bg-indigo-100 text-indigo-800',
      6: 'bg-purple-100 text-purple-800',
      7: 'bg-green-100 text-green-800'
    };
    return colors[level] || colors[1];
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6">
        {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–º */}
        <div className="flex justify-between items-center mb-6">
          <h2 className="text-xl font-bold">–†–µ–π—Ç–∏–Ω–≥ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ & –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ </h2>
          <div className="flex items-center gap-4">
            <div className="flex bg-gray-100 rounded-lg p-1">
              <button
                onClick={() => setActiveTab('students')}
                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                  activeTab === 'students' 
                    ? 'bg-white text-gray-900 shadow-sm' 
                    : 'text-gray-500 hover:text-gray-700'
                }`}
              >
                –°—Ç—É–¥–µ–Ω—Ç—ã
              </button>
              <button
                onClick={() => setActiveTab('applicants')}
                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                  activeTab === 'applicants' 
                    ? 'bg-white text-gray-900 shadow-sm' 
                    : 'text-gray-500 hover:text-gray-700'
                }`}
              >
                –ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç—ã
              </button>
            </div>
          </div>
        </div>

        {/* –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */}
        <div className="mb-4 flex flex-wrap gap-2">
          <input 
            type="text" 
            placeholder="–ü–æ–∏—Å–∫ –ø–æ –§–ò–û..."
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          />
          <select 
            value={filterDirection}
            onChange={(e) => setFilterDirection(e.target.value)}
            className="px-3 py-2 border rounded text-sm"
          >
            <option value="all">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
            {[...new Set(activeTab === 'students' 
              ? students.map(s => s.direction) 
              : applicants.map(a => a.direction)
            )].map((direction, index) => (
              <option key={index} value={direction}>{direction}</option>
            ))}
          </select>

          {/* –£–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã */}
          {activeTab === 'students' && (
            <button
              onClick={() => setShowSmartFilter(!showSmartFilter)}
              className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2 text-sm"
            >
              <span>üéØ</span>
              –£–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã {smartFilters.length > 0 && `(${smartFilters.length})`}
            </button>
          )}

          {activeTab === 'students' && (
            <button 
              onClick={handleMLAnalysis}
              className="px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center gap-2 text-sm"
            >
              <span>ü§ñ</span>
              ML –∞–Ω–∞–ª–∏–∑
            </button>
          )}
        </div>

        {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–º–Ω—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ */}
        {smartFilters.length > 0 && activeTab === 'students' && (
          <div className="mb-4 flex flex-wrap gap-2">
            {smartFilters.map((filter, index) => {
              const criterion = criteriaOptions.find(c => c.value === filter.criterion);
              return (
                <div key={index} className="flex items-center gap-2 bg-gray-100 px-3 py-1 rounded-full text-sm">
                  <span>{criterion?.label} {filter.operator} {filter.value}</span>
                  <button 
                    onClick={() => handleRemoveSmartFilter(index)}
                    className="text-red-500 hover:text-red-700"
                  >
                    √ó
                  </button>
                </div>
              );
            })}
          </div>
        )}

        {/* –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —É–º–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ */}
        {showSmartFilter && activeTab === 'students' && (
          <div className="mb-4 p-4 border rounded-lg bg-gray-50">
            <div className="flex flex-wrap gap-2 items-end">
              <div>
                <label className="block text-sm font-medium mb-1">–ö—Ä–∏—Ç–µ—Ä–∏–π</label>
                <select
                  value={newFilter.criterion}
                  onChange={(e) => setNewFilter({...newFilter, criterion: e.target.value})}
                  className="px-3 py-2 border rounded text-sm"
                >
                  <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫—Ä–∏—Ç–µ—Ä–∏–π</option>
                  {criteriaOptions.map(option => (
                    <option key={option.value} value={option.value}>
                      {option.label}
                    </option>
                  ))}
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-1">–û–ø–µ—Ä–∞—Ç–æ—Ä</label>
                <select
                  value={newFilter.operator}
                  onChange={(e) => setNewFilter({...newFilter, operator: e.target.value})}
                  className="px-3 py-2 border rounded text-sm"
                >
                  {operatorOptions.map(option => (
                    <option key={option.value} value={option.value}>
                      {option.label}
                    </option>
                  ))}
                </select>
              </div>
              
              <div>
                <label className="block text-sm font-medium mb-1">–ó–Ω–∞—á–µ–Ω–∏–µ</label>
                <input
                  type="number"
                  value={newFilter.value}
                  onChange={(e) => setNewFilter({...newFilter, value: e.target.value})}
                  className="px-3 py-2 border rounded text-sm w-20"
                  placeholder="0"
                />
              </div>
              
              <button
                onClick={handleAddSmartFilter}
                className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm"
              >
                –î–æ–±–∞–≤–∏—Ç—å
              </button>
              
              <button
                onClick={() => setShowSmartFilter(false)}
                className="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600 text-sm"
              >
                –û—Ç–º–µ–Ω–∞
              </button>
            </div>
          </div>
        )}

        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div className="bg-blue-50 p-3 rounded">
            <div className="text-lg font-bold text-blue-700">
              {activeTab === 'students' ? filteredAndSortedStudents.length : filteredAndSortedApplicants.length}
            </div>
            <div className="text-sm text-blue-600">
              {activeTab === 'students' ? '–°—Ç—É–¥–µ–Ω—Ç–æ–≤' : '–ê–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤'}
            </div>
          </div>
          <div className="bg-green-50 p-3 rounded">
            <div className="text-lg font-bold text-green-700">
              {activeTab === 'students' 
                ? filteredAndSortedStudents.filter(s => s.level >= 6).length
                : filteredAndSortedApplicants.filter(a => a.originalDocs).length
              }
            </div>
            <div className="text-sm text-green-600">
              {activeTab === 'students' ? '–í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å' : '–° –æ—Ä–∏–≥–∏–Ω–∞–ª–∞–º–∏'}
            </div>
          </div>
          <div className="bg-purple-50 p-3 rounded">
            <div className="text-lg font-bold text-purple-700">
              {activeTab === 'students' 
                ? Math.round(filteredAndSortedStudents.reduce((sum, s) => sum + s.finalRating, 0) / filteredAndSortedStudents.length) || 0
                : Math.round(filteredAndSortedApplicants.reduce((sum, a) => sum + a.points, 0) / filteredAndSortedApplicants.length) || 0
              }
            </div>
            <div className="text-sm text-purple-600">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</div>
          </div>
          <div className="bg-yellow-50 p-3 rounded">
            <div className="text-lg font-bold text-yellow-700">
              {activeTab === 'students' 
                ? filteredAndSortedStudents.filter(s => s.level === 7).length
                : filteredAndSortedApplicants.filter(a => a.portfolio).length
              }
            </div>
            <div className="text-sm text-yellow-600">
              {activeTab === 'students' ? '–£—Ä–æ–≤–µ–Ω—å 7' : '–° –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ'}
            </div>
          </div>
        </div>

        {/* –¢–∞–±–ª–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ */}
        {activeTab === 'students' ? (
          <div className="overflow-x-auto">
            <table className="w-full text-sm text-left">
              <thead className="text-xs text-gray-700 uppercase bg-gray-50">
                <tr>
                  <th className="px-4 py-3">–§–ò–û</th>
                  <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
                  <th className="px-4 py-3">–£—Ä–æ–≤–µ–Ω—å</th>
                  <th className="px-4 py-3">–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∞—è —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å</th>
                  <th className="px-4 py-3">–ü—Ä–∞–∫—Ç–∏–∫–∞/—Å—Ç–∞–∂–∏—Ä–æ–≤–∫–∏</th>
                  <th className="px-4 py-3">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</th>
                  <th className="px-4 py-3">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–ª–ª–æ–≤</th>
                  <th className="px-4 py-3">–ü—Ä–æ—Ñ–∏–ª—å</th>
                </tr>
              </thead>
              <tbody>
                {filteredAndSortedStudents.map(student => (
                  <tr key={student.id} className="bg-white border-b hover:bg-gray-50">
                    <td className="px-4 py-3 font-medium">{student.name}</td>
                    <td className="px-4 py-3">{student.direction}</td>
                    <td className="px-4 py-3">
                      <span className={`px-2 py-1 rounded text-xs ${getLevelColor(student.level)}`}>
                        –£—Ä–æ–≤–µ–Ω—å {student.level}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      <span className={`font-semibold ${
                        student.gpa >= 4.5 ? 'text-green-600' : 
                        student.gpa >= 4 ? 'text-blue-600' : 'text-gray-600'
                      }`}>
                        {student.gpa}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      <span className="text-gray-700">{student.practice}/100</span>
                    </td>
                    <td className="px-4 py-3">
                      <span className="text-gray-700">{student.recommendations}/50</span>
                    </td>
                    <td className="px-4 py-3">
                      <span className="font-bold text-lg text-gray-900">
                        {student.finalRating}
                      </span>
                    </td>
                    <td className="px-4 py-3">
                      <button 
                        onClick={() => handleViewProfile(student)}
                        className="px-3 py-1 bg-indigo-600 text-white rounded hover:bg-indigo-700 text-sm"
                      >
                        –ü—Ä–æ—Ñ–∏–ª—å
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
        ) : (
          /* –¢–∞–±–ª–∏—Ü–∞ –∞–±–∏—Ç—É—Ä–∏–µ–Ω—Ç–æ–≤ */
<div className="overflow-x-auto">
  <table className="w-full text-sm text-left">
    <thead className="text-xs text-gray-700 uppercase bg-gray-50">
      <tr>
        <th className="px-4 py-3">–§–ò–û</th>
        <th className="px-4 py-3">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</th>
        <th className="px-4 py-3">–ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ</th>
        <th className="px-4 py-3">–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ</th>
        <th className="px-4 py-3">–ò–Ω–¥. –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</th>
        <th className="px-4 py-3">–ò—Ç–æ–≥–æ –±–∞–ª–ª–æ–≤</th>
        <th className="px-4 py-3">–û—Ä–∏–≥–∏–Ω–∞–ª</th>
      </tr>
    </thead>

    <tbody>
      {filteredAndSortedApplicants.map(applicant => {
        const portfolioPoints = applicant.portfolio ? 100 : 0;
        const achievements = applicant.achievements ?? 0; // –¥–æ 10 –±–∞–ª–ª–æ–≤
        const totalPoints =
          (applicant.examPoints || 0) + portfolioPoints + achievements;

        return (
          <tr key={applicant.id} className="bg-white border-b hover:bg-gray-50">
            {/* –§–ò–û */}
            <td className="px-4 py-3 font-medium">{applicant.name}</td>

            {/* –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ */}
            <td className="px-4 py-3">{applicant.direction}</td>

            {/* –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ */}
            <td className="px-4 py-3">
              {applicant.portfolio ? (
                <div className="flex items-center gap-2">
                  <button className="text-green-600 hover:text-green-900 text-xs">
                    üìÅ –ü–æ—Ä—Ç—Ñ–æ–ª–∏–æ
                  </button>
                  <span className="text-green-600 font-semibold">+100</span>
                </div>
              ) : (
                <span className="text-gray-400">‚Äî</span>
              )}
            </td>

            {/* –í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–µ */}
            <td className="px-4 py-3 font-semibold">
              {applicant.examPoints ?? 0}
            </td>

            {/* –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è */}
            <td className="px-4 py-3 font-semibold">
              {achievements}/10
            </td>

            {/* –ò—Ç–æ–≥–æ–≤—ã—Ö –±–∞–ª–ª–æ–≤ */}
            <td className="px-4 py-3 font-bold text-lg">
              {totalPoints}
            </td>

            {/* –û—Ä–∏–≥–∏–Ω–∞–ª –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ */}
            <td className="px-4 py-3">
              <span
                className={`px-2 py-1 rounded text-xs ${
                  applicant.originalDocs
                    ? "bg-green-100 text-green-800"
                    : "bg-gray-100 text-gray-800"
                }`}
              >
                {applicant.originalDocs ? "–î–∞" : "–ù–µ—Ç"}
              </span>
            </td>
          </tr>
        );
      })}
    </tbody>
  </table>
</div>

        )}

        {/* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */}
        <div className="mt-4 flex justify-end gap-2">
          <button 
            onClick={handleExportExcel}
            className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 flex items-center gap-2 text-sm"
          >
            <span>üìä</span>
            –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel
          </button>
        </div>
      </div>
    </div>
  );
}

// –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å —ç–∫—Å–ø–µ—Ä—Ç–∞
function ExpertProfilePage({ currentRole }) {
  const [profile, setProfile] = useState({
    name: '',
    email: '',
    phone: '',
    direction: '',
    photo: ''
  });

  const isChairman = currentRole === ROLES.CHAIRMAN;

  useEffect(() => {
    const data = isChairman 
      ? { 
          name: '–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á', 
          email: 'ivanov@committee.ru',
          phone: '+7 (914) 456-78-90',
          direction: '–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
          position: '–ü—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å –∫–æ–º–∏—Å—Å–∏–∏'
        }
      : { 
          name: '–ü–µ—Ç—Ä–æ–≤–∞ –ú–∞—Ä–∏—è –°–µ—Ä–≥–µ–µ–≤–Ω–∞', 
          email: 'petrova@expert.ru',
          phone: '+7 (911) 123-45-67',
          direction: '–≠–∫–æ–Ω–æ–º–∏–∫–∞ –ò–¢ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏–∑',
          position: '–≠–∫—Å–ø–µ—Ä—Ç'
        };
    setProfile(data);
  }, [currentRole, isChairman]);

  const handlePhotoChange = (e) => {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = (e) => {
        setProfile({...profile, photo: e.target.result});
      };
      reader.readAsDataURL(file);
    }
  };

  return (
    <div className="p-6">
      <div className="bg-white card-shadow rounded-lg p-6 max-w-3xl">
        <h2 className="text-2xl font-bold mb-6">
          –ü—Ä–æ—Ñ–∏–ª—å {isChairman ? '–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—è' : '—ç–∫—Å–ø–µ—Ä—Ç–∞'}
        </h2>
        
        <div className="flex items-start gap-6">
          {/* –ë–ª–æ–∫ —Å —Ñ–æ—Ç–æ */}
          <div className="flex flex-col items-center">
            <div className="w-32 h-32 rounded-full bg-indigo-100 flex items-center justify-center text-4xl mb-4 overflow-hidden">
              {profile.photo ? (
                <img src={profile.photo} alt="–§–æ—Ç–æ" className="w-full h-full object-cover" />
              ) : (
                <span>üë§</span>
              )}
            </div>
            <input
              type="file"
              accept="image/*"
              onChange={handlePhotoChange}
              className="hidden"
              id="photo-upload"
            />
            <label 
              htmlFor="photo-upload" 
              className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 cursor-pointer text-sm"
            >
              –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ
            </label>
          </div>
          
          {/* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ */}
          <div className="flex-1 space-y-4">
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–§–ò–û</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.name}
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.email}
                </div>
              </div>
            </div>
            
            <div className="grid grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–¢–µ–ª–µ—Ñ–æ–Ω</label>
                <input
                  type="tel"
                  value={profile.phone}
                  onChange={(e) => setProfile({...profile, phone: e.target.value})}
                  className="w-full px-3 py-2 border rounded"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">–î–æ–ª–∂–Ω–æ—Å—Ç—å</label>
                <div className="w-full px-3 py-2 border rounded bg-gray-50">
                  {profile.position}
                </div>
              </div>
            </div>
            
            <div>
              <label className="block text-sm font-medium text-gray-700 mb-1">–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
              <div className="w-full px-3 py-2 border rounded bg-gray-50">
                {profile.direction}
              </div>
            </div>
            
            <div className="pt-4 border-t">
              <button className="px-6 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}

    

    return (
      <div className="min-h-screen flex">
        <Sidebar 
          collapsed={collapsed} 
          active={active} 
          setActive={handleSetActive} 
          currentRole={currentRole} 
        />
        <div className="flex-1 flex flex-col">
          <Header 
            onToggle={()=>setCollapsed(s=>!s)} 
            onOpenProfile={()=>{ setActive('profile'); setSelectedCriterion(null); }} 
            onToggleNotif={()=>setNotifOpen(s=>!s)} 
            profile={profile} 
            currentRole={currentRole} 
          />

          <main className="flex-1 overflow-auto bg-gray-50 p-4">
            <RoleSelector 
              currentRole={currentRole} 
              onRoleChange={(role) => {
                setCurrentRole(role);
                setActive('home');
                setSelectedCriterion(null);
              }} 
            />
            {renderActivePage()}
          </main>

          <footer className="text-xs text-gray-400 p-3 text-center">
            –¢—Ä–∞–µ–∫—Ç–æ—Ä–∏—è ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.
          </footer>
        </div>

        <SupportModal open={supportOpen} onClose={()=>setSupportOpen(false)} />

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ü–µ–Ω–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–æ–º */}
        {evaluateModalOpen && evaluatingStudent && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–û—Ü–µ–Ω–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞: {evaluatingStudent.name}</h3>
                <button onClick={() => setEvaluateModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div className="text-sm text-gray-600 mb-4">
                  –î–æ–±–∞–≤—å—Ç–µ –±–∞–ª–ª—ã –ø–æ —Ö–∞—Ä–¥ —Å–∫–∏–ª–ª–∞–º (–º–∞–∫—Å–∏–º—É–º 10 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–π –Ω–∞–≤—ã–∫)
                </div>
                {Object.keys(skillScores).map(skill => (
                  <div key={skill} className="flex items-center justify-between p-3 border rounded">
                    <label className="font-medium">{skill}</label>
                    <input
                      type="number"
                      min="0"
                      max="10"
                      value={skillScores[skill] || 0}
                      onChange={(e) => setSkillScores({...skillScores, [skill]: e.target.value})}
                      className="w-24 px-3 py-2 border rounded text-center"
                    />
                  </div>
                ))}
                <div className="flex justify-end gap-2 pt-4 border-t">
                  <button onClick={() => setEvaluateModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitEvaluation} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ü–µ–Ω–∫—É
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∫—É—Ä–∞—Ç–æ—Ä–æ–º –∫–æ–º–ø–∞–Ω–∏–∏ */}
        {practiceModalOpen && evaluatingStudent && (
          <div className="fixed inset-0 bg-black/40 flex items-center justify-center z-50">
            <div className="bg-white rounded-lg p-6 w-full max-w-lg">
              <div className="flex items-center justify-between mb-4">
                <h3 className="text-lg font-semibold">–û—Ü–µ–Ω–∫–∞ –¥–ª—è —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø—Ä–∞–∫—Ç–∏–∫–∏: {evaluatingStudent.name}</h3>
                <button onClick={() => setPracticeModalOpen(false)} className="text-gray-500 hover:text-gray-700">‚úï</button>
              </div>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium mb-1">–ë–∞–ª–ª—ã * (1-10)</label>
                  <input
                    type="number"
                    min="1"
                    max="10"
                    value={practiceForm.score}
                    onChange={(e) => setPracticeForm({...practiceForm, score: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ü–µ–Ω–∫—É –æ—Ç 1 –¥–æ 10"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium mb-1">–û—Ç–∑—ã–≤ *</label>
                  <textarea
                    value={practiceForm.review}
                    onChange={(e) => setPracticeForm({...practiceForm, review: e.target.value})}
                    className="w-full px-3 py-2 border rounded"
                    rows="6"
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–∑—ã–≤ –æ –ø—Ä–∞–∫—Ç–∏–∫–µ —Å—Ç—É–¥–µ–Ω—Ç–∞"
                  />
                </div>
                <div className="flex justify-end gap-2">
                  <button onClick={() => setPracticeModalOpen(false)} className="px-4 py-2 border rounded hover:bg-gray-50">
                    –û—Ç–º–µ–Ω–∞
                  </button>
                  <button onClick={handleSubmitPractice} className="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {notifOpen && (
          <div className="fixed right-6 top-20 bg-white border rounded shadow p-4 z-40 w-80">
            <div className="font-semibold mb-2">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
            <div className="text-sm text-gray-600">
              <div className="p-2 border-b">–ù–æ–≤–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –ò–≤–∞–Ω–æ–≤–∞ –ò.–ò.</div>
              <div className="p-2 border-b">–ü–æ—Å—Ç—É–ø–∏–ª–∞ –∑–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞</div>
              <div className="p-2">–ó–∞–≤—Ç—Ä–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ "–•–∞–∫–∞—Ç–æ–Ω DataCup"</div>
            </div>
          </div>
        )}
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>